import{u as E,r as d,k as u,H as b,j as e,A as T}from"./index-1pnDSHOU.js";import{F as B,a as P,b as t,E as i}from"./formik.esm-YVNHzugS.js";import{B as w}from"./BackBtn-B5DGhZU0.js";import{H as M}from"./Heading-BRXzxPrf.js";import{c as C,a as y,e as r}from"./index.esm-C4q7gs9y.js";import{u as A}from"./useQuery-CvgeLYcU.js";function V(){var p,f,v;const{id:o}=E(),[s,N]=d.useState([]),[x,c]=d.useState(!1),g=["fetch-autoTradePackageDetails",{id:o,updated:x}],{data:n,error:m}=A({queryKey:g,queryFn:()=>T.get(`/auto-trade-package/${o}`)});d.useEffect(()=>{if(n){const{data:{data:{doc:a}}}=n;N(a),c(!1)}m&&u.error(b(m))},[n,m,x]);const q=C().shape({title:y().required("Title is required"),minCoins:r().typeError("Must be a number").required("Required"),maxCoins:r().typeError("Must be a number").required("Required"),autoTradeDepositBonus:r().typeError("Must be a number").required("Required"),autoTradeDailyProfitRate:r().typeError("Must be a number").required("Required"),autoTradeCommissions:C().shape({level1:r().typeError("Must be a number").min(0,"Commission must be at least 0").required("Required"),level2:r().typeError("Must be a number").min(0,"Commission must be at least 0").required("Required"),level3:r().typeError("Must be a number").min(0,"Commission must be at least 0").required("Required")}),status:y().oneOf(["Active","Blocked"],"Invalid status").required("Status is required")}),R={title:(s==null?void 0:s.title)||"abc",minCoins:(s==null?void 0:s.minCoins)||"0",maxCoins:(s==null?void 0:s.maxCoins)||"0",autoTradeDepositBonus:(s==null?void 0:s.autoTradeDepositBonus)||"0",autoTradeDailyProfitRate:(s==null?void 0:s.autoTradeDailyProfitRate)||"0",autoTradeCommissions:{level1:((p=s==null?void 0:s.autoTradeCommissions)==null?void 0:p.level1)||"1",level2:((f=s==null?void 0:s.autoTradeCommissions)==null?void 0:f.level2)||"2",level3:((v=s==null?void 0:s.autoTradeCommissions)==null?void 0:v.level3)||"3"},status:(s==null?void 0:s.status)||"Active"},D=async(a,{setSubmitting:j,resetForm:F})=>{var h;j(!0);try{const{data:l}=await T.patch(`/auto-trade-package/${o}`,a);l!=null&&l.success&&(u.success((h=l==null?void 0:l.data)==null?void 0:h.message),c(!0))}catch(l){u.error(b(l))}finally{j(!1),F()}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(M,{title:"Auto Trade Packages Edit"}),e.jsx(w,{})]}),e.jsx("div",{className:"",children:e.jsx(B,{initialValues:R,validationSchema:q,onSubmit:D,enableReinitialize:!0,children:a=>e.jsxs(P,{className:"autoTradePackages-form",children:[e.jsxs("div",{className:"flex flex-col gap-[10px]",children:[e.jsx("label",{htmlFor:"title",children:"Title"}),e.jsx(t,{name:"title",id:"title",form:a}),e.jsx(i,{name:"title",component:"div",className:"text-sm text-red-500"})]}),e.jsxs("div",{className:"flex flex-col gap-[10px]",children:[e.jsx("label",{htmlFor:"autoTradeDailyProfitRate",children:"Daily Profit %"}),e.jsx(t,{name:"autoTradeDailyProfitRate",id:"autoTradeDailyProfitRate",form:a}),e.jsx(i,{name:"autoTradeDailyProfitRate",component:"div",className:"text-sm text-red-500"})]}),e.jsxs("div",{className:"flex gap-[10px] justify-between max-[600px]:flex-col",children:[e.jsxs("div",{className:"flex flex-col gap-[10px] w-full",children:[e.jsx("label",{htmlFor:"minCoins",children:"From Coins"}),e.jsx(t,{name:"minCoins",id:"minCoins",form:a}),e.jsx(i,{name:"minCoins",component:"div",className:"text-sm text-red-500"})]}),e.jsxs("div",{className:"flex flex-col gap-[10px] w-full",children:[e.jsx("label",{htmlFor:"maxCoins",children:"To Coins"}),e.jsx(t,{name:"maxCoins",id:"maxCoins",form:a}),e.jsx(i,{name:"maxCoins",component:"div",className:"text-sm text-red-500"})]})]}),e.jsx("div",{className:"flex gap-[10px] justify-between max-[600px]:flex-col",children:e.jsxs("div",{className:"flex flex-col gap-[10px] w-full",children:[e.jsx("label",{htmlFor:"autoTradeDepositBonus",children:"Deposit Bonus %"}),e.jsx(t,{name:"autoTradeDepositBonus",id:"autoTradeDepositBonus",form:a}),e.jsx(i,{name:"autoTradeDepositBonus",component:"div",className:"text-sm text-red-500"})]})}),e.jsxs("div",{className:"flex gap-[10px] justify-between max-[600px]:flex-col",children:[e.jsxs("div",{className:"flex flex-col gap-[10px] w-full",children:[e.jsx("label",{htmlFor:"autoTradeCommissions.level1",children:"Level One Residual %"}),e.jsx(t,{name:"autoTradeCommissions.level1",id:"autoTradeCommissions.level1",form:a}),e.jsx(i,{name:"autoTradeCommissions.level1",component:"div",className:"text-sm text-red-500"})]}),e.jsxs("div",{className:"flex flex-col gap-[10px] w-full",children:[e.jsx("label",{htmlFor:"autoTradeCommissions.level2",children:"Level Two Residual %"}),e.jsx(t,{name:"autoTradeCommissions.level2",id:"autoTradeCommissions.level2",form:a}),e.jsx(i,{name:"autoTradeCommissions.level2",component:"div",className:"text-sm text-red-500"})]})]}),e.jsxs("div",{className:"flex flex-col gap-[10px]",children:[e.jsx("label",{htmlFor:"autoTradeCommissions.level3",children:"Level Three Residual %"}),e.jsx(t,{name:"autoTradeCommissions.level3",id:"autoTradeCommissions.level3",form:a}),e.jsx(i,{name:"autoTradeCommissions.level3",component:"div",className:"text-sm text-red-500"})]}),e.jsxs("div",{className:"flex flex-col gap-[10px]",children:[e.jsx("label",{htmlFor:"status",children:"Status"}),e.jsxs(t,{className:"bg-inherit px-4 py-2 border border-gray-700 rounded",as:"select",name:"status",id:"status",form:a,children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Blocked",children:"Blocked"})]}),e.jsx(i,{name:"status",component:"div",className:"text-sm text-red-500"})]}),e.jsx("div",{className:"mt-2 w-fit",children:e.jsx("button",{type:"submit",className:"btn-primary px-4 py-2",disabled:a.isSubmitting,children:"Submit"})})]})})})]})})}export{V as default};
