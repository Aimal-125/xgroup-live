import{T as we,A as ae,k as ee,r as s,a as qe,b as Ee,j as e}from"./index-CR2PTnGP.js";import{F as Re,a as Ne}from"./formik.esm-DTrArBGY.js";import{H as ye}from"./Heading-BGYpxq2W.js";import{B as Be}from"./BackBtn-qMQnlAqP.js";import{L as Pe}from"./useWindowSize-Do2-NPva.js";import{D as Se}from"./DisplayError-DwBfIbvM.js";import{F as l}from"./FormControl-BPiWpiF7.js";import{c as D,e as r,a as i}from"./index.esm-DrRihLu7.js";import{u as Fe}from"./useQuery-BvaY5-TG.js";import"./LoadingBtn-BtdHQEGi.js";import"./ClipLoader-BVQCHCPU.js";import"./Input-DgNLSsv0.js";import"./react-tooltip.min-8-V3KYLF.js";import"./index-LvzHWtTh.js";import"./index-Chjiymov.js";const Te=D().shape({usdPKRExchangeRate:r().min(1,"Exchange Rate should be greate than zero").required("Required"),coinPKRExchangeRate:r().min(1,"Exchange Rate should be greate than zero").required("Required"),minimumDeposit:r().min(0,"Minimum deposit must be at least 0").required("Minimum deposit is required"),minimumWithdraw:r().min(0,"Minimum withdraw must be at least 0").required("Minimum withdraw is required"),withdrawStartTime:i().required("Withdraw start time is required"),withdrawEndTime:i().required("Withdraw end time is required"),stateBankPercentage:i().required("Required"),worldBankPercentage:i().required("Required"),stateBankPercentageMin:i().required("Required"),worldBankPercentageMin:i().required("Required"),stateBankPercentageMax:i().required("Required"),worldBankPercentageMax:i().required("Required"),autoTradeDailyProfitRate:r().min(0,"Profit should be 0 or more").required("Required"),platformFee:r().min(0,"Platform fee must be at least 0").required("Platform fee is required"),tradeDoorOpenTime:i().required("Required"),whatsAppGroupLink:i().url("Must be a valid URL").required("WhatsApp group link is required"),whatsAppSupport:i().required("WhatsApp support contact is required"),contactEmail:i().email("Must be a valid email address").required("Contact email is required"),tradeDepositBonus:r().min(0,"Bonus should be 0 or greate than 0").required("Required"),tradeCommissions:D().shape({level1:r().min(0,"Commission must be at least 0").required("Required"),level2:r().min(0,"Commission must be at least 0").required("Required"),level3:r().min(0,"Commission must be at least 0").required("Required")}),IPCommissions:D().shape({level1:r().min(0,"Commission must be at least 0").required("Required"),level2:r().min(0,"Commission must be at least 0").required("Required"),level3:r().min(0,"Commission must be at least 0").required("Required")}),autoTradeDepositBonus:r().min(0,"Bonus should be 0 or greate than 0").required("Required"),autoTradeCommissions:D().shape({level1:r().min(0,"Commission must be at least 0").required("Required"),level2:r().min(0,"Commission must be at least 0").required("Required"),level3:r().min(0,"Commission must be at least 0").required("Required")})}),ke="/settings",Ce=we(),{token:De}=Ce,Me={headers:{Authorization:`Bearer ${De}`,"Content-Type":"application/json"}},We=(d,m,b,u,x,p,f)=>async()=>{try{m(!0);const{data:c}=await ae.post(ke,d,Me),{data:{message:h}}=c;ee.success(h),f(0)}catch(c){const{response:{data:{message:h}}}=c;ee.error(h)}finally{m(!1),u&&(u.value=""),x&&(x.value=""),p&&(p.selectedIndex=0),b()}},Ye=()=>{var G,z,_,$,H,U,Q,J,X;const[d,m]=s.useState(!1),[b,u]=s.useState(""),[x,p]=s.useState(""),[f,c]=s.useState(""),h=qe(),le=Ee(),[te,ne]=s.useState(!1),re=async(a,{resetForm:g})=>{var Y;const A=document.getElementById("startTime"),K=document.getElementById("endTime"),C=document.getElementById("winBank");let O;if(d){if(!A.value)return u("Required");if(!K.value)return p("Required");if(!C.value||C.value==="Select...")return c("Required");O={...a,usdPKRExchangeRate:((Y=a==null?void 0:a.usdPKRExchangeRate)==null?void 0:Y.toFixed())*100,coinPKRExchangeRate:(a==null?void 0:a.coinPKRExchangeRate)*100,manualWinBankStartTime:A.value,manualWinBankEndTime:K.value,manualWinBank:C.value,tradeDoorWorking:"Manual"}}else O=a;try{h(We(O,ne,g,A,K,C,le))}catch(Z){console.error(Z)}},[ie,se]=s.useState([]),{usdPKRExchangeRate:j,coinPKRExchangeRate:v,minimumDeposit:w,minimumWithdraw:q,withdrawStartTime:M,withdrawEndTime:W,stateBankPercentage:E,worldBankPercentage:R,autoTradeDailyProfitRate:N,platformFee:y,tradeDoorOpenTime:oe,whatsAppGroupLink:de,whatsAppSupport:ce,contactEmail:me,manualWinBank:I,manualWinBankStartTime:ue,manualWinBankEndTime:xe,tradeDepositBonus:B,tradeCommissions:t,autoTradeDepositBonus:P,autoTradeCommissions:n,stateBankPercentageMin:S,worldBankPercentageMin:F,stateBankPercentageMax:T,worldBankPercentageMax:k,IPCommissions:o}=ie,pe=["fetch-allSettings"],{isLoading:he,data:L,isError:ge}=Fe({queryKey:pe,queryFn:()=>ae.get("/settings")}),be=s.useRef(null),fe=s.useRef(null),je=s.useRef(null);s.useEffect(()=>{if(L){const{data:{data:{settings:a}}}=L;se(a),m((a==null?void 0:a.tradeDoorWorking)==="Manual")}},[L]);const V=a=>{m(a==="Manual")},ve={usdPKRExchangeRate:j?(j==null?void 0:j.toFixed(2))/100:"",coinPKRExchangeRate:v?(v==null?void 0:v.toFixed(2))/100:"",minimumDeposit:w?w==null?void 0:w.toFixed(2):"",minimumWithdraw:q?q==null?void 0:q.toFixed(2):"",withdrawStartTime:M==null?void 0:M.split(" ")[0],withdrawEndTime:W==null?void 0:W.split(" ")[0],stateBankPercentage:E?E==null?void 0:E.toFixed():"",worldBankPercentage:R?R==null?void 0:R.toFixed():"",stateBankPercentageMin:S?S==null?void 0:S.toFixed():"",worldBankPercentageMin:F?F==null?void 0:F.toFixed():"",stateBankPercentageMax:T?T==null?void 0:T.toFixed():"",worldBankPercentageMax:k?k==null?void 0:k.toFixed():"",autoTradeDailyProfitRate:N?N==null?void 0:N.toFixed(2):"",platformFee:y?y==null?void 0:y.toFixed(2):"",tradeDoorOpenTime:oe,whatsAppGroupLink:de,whatsAppSupport:ce,contactEmail:me,tradeDoorWorking:"Comparison",tradeDepositBonus:B?B==null?void 0:B.toFixed(2):"",tradeCommissions:{level1:t!=null&&t.level1?(G=t==null?void 0:t.level1)==null?void 0:G.toFixed(2):"",level2:t!=null&&t.level2?(z=t==null?void 0:t.level2)==null?void 0:z.toFixed(2):"",level3:t!=null&&t.level3?(_=t==null?void 0:t.level3)==null?void 0:_.toFixed(2):""},IPCommissions:{level1:(($=o==null?void 0:o.level1)==null?void 0:$.toFixed(2))||"",level2:((H=o==null?void 0:o.level2)==null?void 0:H.toFixed(2))||"",level3:((U=o==null?void 0:o.level3)==null?void 0:U.toFixed(2))||""},autoTradeDepositBonus:P?P==null?void 0:P.toFixed(2):"",autoTradeCommissions:{level1:n!=null&&n.level1?(Q=n==null?void 0:n.level1)==null?void 0:Q.toFixed(2):"",level2:n!=null&&n.level2?(J=n==null?void 0:n.level2)==null?void 0:J.toFixed(2):"",level3:n!=null&&n.level3?(X=n==null?void 0:n.level3)==null?void 0:X.toFixed(2):""}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ye,{title:"Settings"}),e.jsx(Be,{})]}),he?e.jsx(Pe,{}):ge?e.jsx(Se,{}):e.jsx("div",{className:" mt-6",children:e.jsx(Re,{initialValues:ve,validationSchema:Te,onSubmit:re,enableReinitialize:!0,children:a=>e.jsxs(Ne,{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"bg-dark p-4 rounded-lg flex flex-col gap-4",children:[e.jsxs("div",{className:"flex md:flex-row flex-col gap-4",children:[e.jsx(l,{control:"input",type:"number",label:"1 USD To PKR",name:"usdPKRExchangeRate",placeholder:"Enter PKR amount",formik:a}),e.jsx(l,{control:"input",type:"number",label:"1 Coin to PKR",name:"coinPKRExchangeRate",placeholder:"Enter PKR amount",formik:a})]}),e.jsxs("div",{className:"flex md:flex-row flex-col gap-4",children:[e.jsx(l,{control:"input",type:"number",label:"Minimum Deposit Coins",name:"minimumDeposit",placeholder:"Enter min deposit coins",formik:a}),e.jsx(l,{control:"input",type:"number",label:"Minimum Withdraw Coins",name:"minimumWithdraw",placeholder:"Enter min withdraw coins",formik:a})]}),e.jsxs("div",{className:"flex md:flex-row flex-col gap-4",children:[e.jsx(l,{control:"input",type:"time",label:"Withdraw Start Time",name:"withdrawStartTime",formik:a}),e.jsx(l,{control:"input",type:"time",label:"Withdraw End Time",name:"withdrawEndTime",formik:a})]}),e.jsxs("div",{className:"flex md:flex-row flex-col gap-4",children:[e.jsx(l,{control:"input",type:"number",label:"State Bank Percentage % ",name:"stateBankPercentage",placeholder:"Ex: 5%",formik:a}),e.jsx(l,{control:"input",label:"Word Bank Percentage % ",name:"worldBankPercentage",placeholder:"Ex: 2%",formik:a})]}),e.jsxs("div",{className:"flex md:flex-row flex-col gap-4",children:[e.jsx(l,{control:"input",type:"number",label:"Minimum State Bank Percentage %",name:"stateBankPercentageMin",placeholder:"Ex: 5%",formik:a}),e.jsx(l,{control:"input",type:"number",label:"Maximum State Bank Percentage %",name:"stateBankPercentageMax",placeholder:"Ex: 5%",formik:a})]}),e.jsxs("div",{className:"flex md:flex-row flex-col gap-4",children:[e.jsx(l,{control:"input",label:"Minimum Word Bank Percentage %",name:"worldBankPercentageMin",placeholder:"Ex: 2%",formik:a}),e.jsx(l,{control:"input",label:"Maximum Word Bank Percentage %",name:"worldBankPercentageMax",placeholder:"Ex: 2%",formik:a})]}),e.jsxs("div",{className:"flex md:flex-row flex-col gap-4",children:[e.jsx(l,{control:"input",label:"Auto Trade Daily Percentage %",name:"autoTradeDailyProfitRate",placeholder:"Ex: 5%",formik:a}),e.jsx(l,{control:"input",type:"number",label:"Platform Fee %",name:"platformFee",placeholder:"Enter platform fee percentage",formik:a})]}),e.jsx("div",{className:"flex md:flex-row flex-col gap-4",children:e.jsx(l,{control:"input",label:"Trade Door Open Time (Seconds)",name:"tradeDoorOpenTime",placeholder:"Ex: 15 seconds",formik:a})}),e.jsxs("div",{className:"flex md:flex-row flex-col gap-4",children:[e.jsx(l,{control:"input",label:"whatsApp Group Link",name:"whatsAppGroupLink",placeholder:"Enter whatsApp Group Link",formik:a}),e.jsx(l,{control:"input",label:"Whatsapp Support",name:"whatsAppSupport",placeholder:"Enter whatsapp support number",formik:a})]}),e.jsx("div",{className:"flex md:flex-row flex-col gap-4",children:e.jsx(l,{control:"input",label:"Contact Email",name:"contactEmail",placeholder:"Ex: support@gmail.com",formik:a})})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Trade Door Working"}),e.jsxs("div",{className:"bg-dark p-4 rounded-lg flex flex-col gap-5 ",children:[e.jsxs("div",{className:"flex max-[450px]:flex-col max-[450px]:items-start justify-center items-center gap-5",children:[e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("input",{className:"radio-btn",type:"radio",name:"radio-button",id:"byComparison",checked:!d,onChange:()=>V("Comparison"),hidden:!0}),e.jsx("span",{className:"custom-radio"}),e.jsx("label",{className:"text-xl font-bold radio-label",htmlFor:"byComparison",children:"By Comparison"})]}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("input",{className:"radio-btn",type:"radio",name:"radio-button",id:"manual",value:"Manual",checked:d,onChange:()=>V("Manual"),hidden:!0}),e.jsx("span",{className:"custom-radio"}),e.jsx("label",{className:"text-xl font-bold radio-label",htmlFor:"manual",children:"Manual"})]})]}),d&&e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"font-bold",htmlFor:"winBank",children:"Win Bank"}),e.jsxs("select",{ref:be,name:"winBank",id:"winBank",defaultValue:I||"Select...",className:"w-full bg-transparent text-inherit border border-[#374151] rounded p-3",onChange:()=>c(""),children:[e.jsx("option",{value:"Select...",disabled:!0,hidden:!0,children:"Select..."}),e.jsx("option",{value:"State_Bank",children:"State Bank"}),e.jsx("option",{value:"World_Bank",children:"World Bank"})]})]}),f&&e.jsx("p",{className:"text-red-600",children:f}),e.jsxs("div",{className:"flex max-[600px]:flex-col justify-between gap-5",children:[e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-inherit font-bold",children:"Start Time"}),e.jsx("input",{ref:fe,className:"p-3 rounded bg-dark border border-gray-700",type:"time",name:"startTime",id:"startTime",defaultValue:ue,onChange:()=>u(""),onFocus:g=>g.target.showPicker()})]}),b&&e.jsx("p",{className:"text-red-600",children:b})]}),e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-inherit font-bold",children:"End Time"}),e.jsx("input",{ref:je,className:"p-3 rounded bg-dark border border-gray-700",type:"time",name:"endTime",id:"endTime",defaultValue:xe,onChange:()=>p(""),onFocus:g=>g.target.showPicker()})]}),x&&e.jsx("p",{className:"text-red-600",children:x})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"heading-sm mb-2",children:"Trade Deposit Commission"}),e.jsxs("div",{className:"bg-dark p-4 rounded-lg",children:[e.jsxs("div",{className:"flex md:flex-row flex-col gap-4",children:[e.jsx(l,{control:"input",type:"number",label:"Trade Deposit Bonus %",name:"tradeDepositBonus",placeholder:"Ex : 4%",formik:a}),e.jsx(l,{control:"input",type:"number",label:"Level One Startup Commision %",name:"tradeCommissions.level1",placeholder:"Ex : 5%",formik:a})]}),e.jsxs("div",{className:"flex md:flex-row flex-col gap-4 mt-4",children:[e.jsx(l,{control:"input",type:"number",label:"Level Two Startup Commision %",name:"tradeCommissions.level2",placeholder:"Ex : 4%",formik:a}),e.jsx(l,{control:"input",type:"number",label:"Level Three Startup Commision %",name:"tradeCommissions.level3",placeholder:"Ex : 3%",formik:a})]}),e.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[e.jsxs("div",{className:"flex gap-4 max-[600px]:flex-col",children:[e.jsx(l,{control:"input",type:"number",label:"Level One IP Commision %",name:"IPCommissions.level1",placeholder:"Ex : 4%",formik:a}),e.jsx(l,{control:"input",type:"number",label:"Level Two IP Commision %",name:"IPCommissions.level2",placeholder:"Ex : 3%",formik:a})]}),e.jsx("div",{children:e.jsx(l,{control:"input",type:"number",label:"Level Three IP Commision %",name:"IPCommissions.level3",placeholder:"Ex : 3%",formik:a})})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"heading-sm mb-2",children:"Auto Trade Profit Share"}),e.jsxs("div",{className:"bg-dark p-4 rounded-lg",children:[e.jsxs("div",{className:"flex md:flex-row flex-col gap-4",children:[e.jsx(l,{control:"input",type:"number",label:"Auto Trade Deposit Bonus %",name:"autoTradeDepositBonus",placeholder:"Ex : 4%",formik:a}),e.jsx(l,{control:"input",type:"number",label:"Level One Residual Commision %",name:"autoTradeCommissions.level1",placeholder:"Ex : 5%",formik:a})]}),e.jsxs("div",{className:"flex md:flex-row flex-col gap-4 mt-4",children:[e.jsx(l,{control:"input",type:"number",label:"Level Two Residual Commision %",name:"autoTradeCommissions.level2",placeholder:"Ex : 4%",formik:a}),e.jsx(l,{control:"input",type:"number",label:"Level Three Residual Commision %",name:"autoTradeCommissions.level3",placeholder:"Ex : 3%",formik:a})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{type:"submit",className:"btn-primary py-2 px-12",disabled:te,children:"Save"})})]})})})]})};export{Ye as default};
