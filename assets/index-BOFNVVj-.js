import{c as p,r as w,j as s,A as u,k as x,t as h}from"./index-Dgq3PrwZ.js";import{F as f,a as j}from"./formik.esm-C3G25gt-.js";import{c as b,a as o,b as P}from"./index.esm-D8Mb4-8M.js";import{H as y}from"./Heading-BleAqs7B.js";import{B as g}from"./BackBtn-BTtbY5T6.js";import{F as t}from"./FormControl-DGPwoX9g.js";import{L as N}from"./LoadingBtn-ean50z1k.js";import"./Input-DLTszUu7.js";import"./react-tooltip.min-Cay2iBks.js";import"./index-LvzHWtTh.js";import"./index-Chjiymov.js";import"./ClipLoader-DZl_46q6.js";const v={currentPassword:"",newPassword:"",confirmPassword:""},$=b({currentPassword:o().min(8,"Password should have at least 8 characters").required("Old password is required"),newPassword:o().min(8,"Password should have at least 8 characters").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,"Password must include at least one uppercase letter, one lowercase letter, one number, and one special character").required("New password is required"),confirmPassword:o().oneOf([P("newPassword"),null],"Passwords must match").required("Confirm password is required")}),V=()=>{const{user:n}=p(a=>a.auth),{token:i}=n,l={headers:{Authorization:`Bearer ${i}`}},[d,e]=w.useState(!1),c=async(a,{resetForm:m})=>{try{e(!0);const{data:{data:{message:r}}}=await u.patch("/user/update-my-password",a,l);m(),x.success(r),e(!1)}catch(r){e(!1),h(r)}};return s.jsxs("div",{className:"",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(y,{title:"Update Password"}),s.jsx(g,{})]}),s.jsx("div",{className:"border border-gray-700 bg-dark rounded-lg mt-6",children:s.jsx(f,{initialValues:v,validationSchema:$,onSubmit:c,children:a=>s.jsxs(j,{className:"mt-2 box-shadow sm:py-8 sm:px-4 py-4 px-3 ",children:[s.jsxs("div",{className:"flex gap-x-4 gap-y-2 sm:flex-row flex-col",children:[s.jsx(t,{label:"Current password",control:"password",placeholder:"Enter your current password",name:"currentPassword",formik:a}),s.jsx(t,{control:"password",label:"New password",placeholder:"Enter New password",name:"newPassword",formik:a})]}),s.jsx("div",{className:"flex gap-6 sm:flex-row flex-col mt-2",children:s.jsx(t,{control:"password",label:"Confirm password",placeholder:"Confirm new password",name:"confirmPassword",formik:a})}),s.jsx("div",{className:"flex justify-end mt-4",children:s.jsx("button",{className:"btn-primary py-3 px-8",type:"submit",disabled:d||!a.isValid,children:d?s.jsx(N,{}):"Update"})})]})})})]})};export{V as default};
