import{j as e,L as N,d as P,r as n,a as F,c as I,U as E,V as L,W as B,H as M,A as C}from"./index-1pnDSHOU.js";import{u as $}from"./useQuery-CvgeLYcU.js";import{T as H,a as K,b as w,c as i,d as U,e as p}from"./Tr-Dyr3Fnjo.js";import{M as Y}from"./react-tooltip.min-C-OfYQEo.js";import{I as R}from"./img1-CxsS-zk5.js";import{P as Z}from"./index-BovKxo3P.js";import{S as q}from"./Status-B8QfwEhJ.js";import{h as f}from"./moment-C5S46NFB.js";import{B as z}from"./BackBtn-B5DGhZU0.js";import{H as V}from"./Heading-BRXzxPrf.js";import{L as W}from"./useWindowSize-BkpUPsDX.js";import{I as _}from"./ItemNotFound-d29NNkJk.js";import{D as Q}from"./DisplayError-DsQrJfhQ.js";import"./index-LvzHWtTh.js";import"./LoadingBtn-DpcvXiWk.js";import"./ClipLoader-CriU2_1a.js";const G=({docs:o,currentPage:h,setCurrentPage:r,pages:d,startIndex:t})=>e.jsx("div",{className:"bg-secondary rounded-lg p-2 overflow-x-auto",children:e.jsxs("div",{className:"bg-dark  p-2 rounded-lg overflow-container  custom-scrollbar",children:[e.jsxs(H,{className:"sm:text-base text-sm table-auto  ",children:[e.jsx(K,{className:"bg-secondary text-left rounded-lg",children:e.jsxs(w,{children:[e.jsx(i,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Sr"}),e.jsx(i,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"User"}),e.jsx(i,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Prove"}),e.jsx(i,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Date"}),e.jsx(i,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Status"}),e.jsx(i,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Action"})]})}),e.jsx(U,{children:o==null?void 0:o.map((s,c)=>{var x,l;return e.jsxs(w,{className:"text-grayText sm:hover:bg-stroke hover:text-pure border-b border-b-gray-700",children:[e.jsx(p,{className:"  px-6 py-4 whitespace-nowrap sm:text-center text-right",children:s!=null&&s.longAutoIncrementId?s==null?void 0:s.longAutoIncrementId:t+c+1?t+c+1:"N/A"}),e.jsx(p,{className:"px-6 py-4 whitespace-nowrap sm:text-center underline cursor-pointer ",children:e.jsx(N,{to:`/app/users/details/${(x=s==null?void 0:s.user)==null?void 0:x._id}`,children:s!=null&&s.user?s.user.fullName||s.user.username:""})}),e.jsx(p,{className:"px-6 py-4 whitespace-nowrap sm:text-center  ",children:e.jsx("div",{className:"flex w-full  whitespace-nowrap justify-start sm:justify-center",children:e.jsx("img",{src:(l=s==null?void 0:s.user)!=null&&l.image?`${P}/${s.user.image}`:R,alt:"img",className:"w-[100px] h-[100px] object-cover "})})}),e.jsx(p,{className:"  px-6 py-4 whitespace-nowrap sm:text-center text-right",children:f(s==null?void 0:s.createdAt).format("D, MMMM YYYY, hh:mm A")}),e.jsx(p,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e.jsx("div",{className:"flex justify-start sm:justify-center",children:e.jsx(q,{status:s==null?void 0:s.status})})}),e.jsx(p,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e.jsxs(N,{to:`/app/kyc/details/${s._id}`,className:"text-primary","data-tooltip-id":"view-user-details","data-tooltip-content":"View Details",children:[e.jsx("i",{className:"uil uil-eye"}),e.jsx(Y,{id:"view-user-details",style:{fontSize:15}})]})})]},c)})})]}),e.jsx(Z,{totalPages:d,currentPage:h,setCurrentPage:r})]})}),me=()=>{const[o,h]=n.useState(1),[r,d]=n.useState(""),[t,s]=n.useState(""),[c,x]=n.useState(""),[l,j]=n.useState(""),g=10,b=(o-1)*g;n.useEffect(()=>{if(r&&t){if(f(t).isSame(r)||f(t).isBefore(r))return j("2025-01-11T23:59:59.999Z");if(f(r).isAfter(t))return d("2025-01-11T23:59:59.999Z");x(r),j(t)}},[r,t]);const m=F(),{docs:u,pages:v}=I(a=>a==null?void 0:a.kyc),{isLoading:D,data:y,isError:T,error:S}=$({queryKey:["fetch-all-kyc",c,l,o,g],queryFn:()=>{const a=new URLSearchParams;return a.append("page",o),a.append("pageSize",g),c&&a.append("from",c),l&&a.append("to",l),C.get(`/know-your-customer?${a.toString()}`)}});return n.useEffect(()=>{if(y){const{data:{data:{docs:a,docsCount:k,pages:A}}}=y;m(E(a)),m(L(k)),m(B(A))}},[y,m]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(V,{title:"Kyc"}),e.jsx(z,{})]}),e.jsxs("div",{className:"flex justify-between max-[400px]:flex-col gap-5 mt-6 ",children:[e.jsxs("div",{className:"form-row",children:[e.jsx("label",{htmlFor:"fromDate",children:"From Date"}),e.jsx("input",{type:"date",id:"fromDate",name:"from",value:r,onChange:a=>{d(a.target.value)}})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("label",{htmlFor:"toDate",children:"To Date"}),e.jsx("input",{type:"date",id:"toDate",name:"to",value:t,onChange:a=>{s(a.target.value)}})]})]}),e.jsx("div",{className:"mt-6",children:D?e.jsx(W,{}):T?e.jsx(Q,{message:M(S)}):(u==null?void 0:u.length)>0?e.jsx(G,{docs:u,currentPage:o,setCurrentPage:h,pages:v,startIndex:b}):e.jsx(_,{message:"No kyc  available."})})]})};export{me as default};
