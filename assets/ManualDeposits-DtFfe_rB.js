import{b as M,r,j as s,d as k,A as F}from"./index-DXC4WxTY.js";import{B as E}from"./BackBtn-CAoFsR9d.js";import{H as B}from"./Heading-BW07qGLk.js";import{L as C}from"./useWindowSize-CJaWzJUi.js";import{D as R}from"./DisplayError-BPL7rDiG.js";import{T as $,a as L,b as I,c,d as U,e as l}from"./Tr-BAmmJf8y.js";import{I as H}from"./img1-Dr1yV29J.js";import{P as K}from"./index-CvxaO4ZM.js";import{h as v}from"./moment-C5S46NFB.js";import{S as Y}from"./Status-DBi7uq6n.js";import{u as Z}from"./useQuery-dmNfqFuk.js";import{I as q}from"./ItemNotFound-PPiIMDK4.js";import"./LoadingBtn-BPpN-Rmz.js";import"./ClipLoader-BeN6fJ0f.js";function _({docs:n,pages:b,currentPage:h,setCurrentPage:S}){const m=M();r.useState("");const T=(e,f)=>{e.stopPropagation(),m(`/app/deposits/manual-deposits-details/${f}`)};return s.jsx(s.Fragment,{children:s.jsx("div",{className:"bg-secondary rounded-lg p-2 overflow-x-auto",children:s.jsxs("div",{className:"bg-dark  p-2 rounded-lg overflow-container  custom-scrollbar",children:[s.jsxs($,{className:"sm:text-base text-sm table-auto  ",children:[s.jsx(L,{className:"bg-secondary text-left rounded-lg",children:s.jsxs(I,{children:[s.jsx(c,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Sr"}),s.jsx(c,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Username"}),s.jsx(c,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Deposit Amount"}),s.jsx(c,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Deposit By"}),s.jsx(c,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Status"}),s.jsx(c,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Date & Time"}),s.jsx(c,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Action"})]})}),s.jsx(U,{children:n==null?void 0:n.map((e,f)=>{var j,t,g,o,y,d,N,p,x,D,u;return s.jsxs(I,{className:"text-grayText sm:hover:bg-stroke hover:text-pure border-b border-b-gray-700",onClick:()=>{var i;return m(`/app/users/details/${(i=e==null?void 0:e.user)==null?void 0:i._id}`)},children:[s.jsx(l,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e!=null&&e.longAutoIncrementId?e==null?void 0:e.longAutoIncrementId:"N/A"}),s.jsxs(l,{className:" px-6 lg:pl-16  lg:px-0 py-4 whitespace-nowrap sm:text-center  flex  flex-col  sm:flex-row  gap-4 items-center   ",children:[(j=e==null?void 0:e.user)!=null&&j.image?s.jsx("img",{src:`${k}/${(t=e==null?void 0:e.user)==null?void 0:t.image}`,alt:(g=e==null?void 0:e.user)==null?void 0:g.username,className:"w-8 h-8 rounded-full"}):s.jsx("img",{src:H,alt:(o=e==null?void 0:e.user)==null?void 0:o.username,className:"w-8 h-8 rounded-full"}),s.jsx("span",{className:"underline",children:(y=e==null?void 0:e.user)==null?void 0:y.username})]}),s.jsx(l,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:((d=e==null?void 0:e.orderId)==null?void 0:d.currencyCode)==="PKR"?s.jsxs("span",{children:[((N=e==null?void 0:e.orderId)==null?void 0:N.amountPKR)*.01," PKR"]}):s.jsxs("span",{children:[((p=e==null?void 0:e.orderId)==null?void 0:p.amountUSD)*.01," USD"]})}),s.jsx(l,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:(D=(x=e==null?void 0:e.orderId)==null?void 0:x.depositorAccountInfo)==null?void 0:D.paymentMethod}),s.jsx(l,{className:`px-6 py-4 whitespace-nowrap sm:text-center inline-flex justify-center items-center relative top-[-12px] w-full  ${(e==null?void 0:e.status)==="Approved"?"text-green-500":(e==null?void 0:e.status)==="Pending"?"text-yellow-500":(e==null?void 0:e.status)==="Declined"?"text-red-500":""}`,children:s.jsx(Y,{status:e==null?void 0:e.status})}),s.jsx(l,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:v((u=e==null?void 0:e.orderId)==null?void 0:u.createdAt).format("D, MMMM YYYY, hh:mm A")}),s.jsx(l,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:s.jsx("div",{className:"flex justify-center space-x-2",children:s.jsx("div",{className:"flex items-center justify-center gap-4 text-xl ",children:s.jsx("button",{onClick:i=>T(i,e==null?void 0:e._id),className:"text-blue-500 hover:text-pure duration-200",title:"View Details",children:s.jsx("i",{className:"uil uil-eye"})})})})})]},f)})})]}),s.jsx(K,{totalPages:b,currentPage:h,setCurrentPage:S})]})})})}function ne(){const[n,b]=r.useState([]),[h,S]=r.useState(1),[m,T]=r.useState(1),[e,f]=r.useState("Error"),j=10,[t,g]=r.useState(""),[o,y]=r.useState(""),[d,N]=r.useState(""),[p,x]=r.useState("");r.useEffect(()=>{if(t&&o){if(v(o).isSame(t)||v(o).isBefore(t))return x("2025-01-11T23:59:59.999Z");if(v(t).isAfter(o))return g("2025-01-11T23:59:59.999Z");N(t),x(o)}},[t,o]);const D=["fetch-manualDeposits",{currentPage:h,limit:j,backendFromDate:d,backendToDate:p}],{data:u,isError:i,isLoading:A,error:w}=Z({queryKey:D,queryFn:()=>{const a=new URLSearchParams;return a.append("page",h),a.append("pageSize",j),a.append("verificationMethod","Manual"),d&&a.append("from",d),p&&a.append("to",p),F.get(`/deposit?${a.toString()}`)}});return r.useEffect(()=>{if(u){const{data:{data:{docs:a,pages:P}}}=u;b(a),T(P)}if(w){const{response:{data:{message:a}}}=w;f(a)}},[u,w]),s.jsx(s.Fragment,{children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(B,{title:"Manual Deposits"}),s.jsx(E,{})]}),s.jsxs("div",{className:"flex justify-between max-[400px]:flex-col gap-5 mt-6",children:[s.jsxs("div",{className:"form-row",children:[s.jsx("label",{htmlFor:"fromDate",children:"From Date"}),s.jsx("input",{type:"date",id:"fromDate",placeholder:"Select Date",onChange:a=>g(a.target.value),value:t})]}),s.jsxs("div",{className:"form-row",children:[s.jsx("label",{htmlFor:"toDate",children:"To Date"}),s.jsx("input",{type:"date",id:"toDate",placeholder:"Select Date",onChange:a=>y(a.target.value),value:o})]})]}),s.jsx("div",{className:"mt-6",children:A?s.jsx(C,{}):i?s.jsx(R,{message:w?e:"An error occurred while fetching data"}):(n==null?void 0:n.length)===0?s.jsx(q,{message:"No data found."}):s.jsx(_,{docs:n,pages:m,currentPage:h,setCurrentPage:S})})]})})}export{ne as default};
