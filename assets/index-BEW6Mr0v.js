import{b as _,j as s,L as $,r as l,k as W,A as Z}from"./index-1pnDSHOU.js";import{L as q}from"./useWindowSize-BkpUPsDX.js";import{T as z,a as R,b as L,c as r,d as U,e as n}from"./Tr-Dyr3Fnjo.js";import{M as G}from"./react-tooltip.min-C-OfYQEo.js";import{P as K}from"./index-BovKxo3P.js";import{P as H}from"./plus-icon-Cm0htiCt.js";import{h as j}from"./moment-C5S46NFB.js";import{S as O}from"./Status-B8QfwEhJ.js";import{B as Q}from"./BackBtn-B5DGhZU0.js";import{H as V}from"./Heading-BRXzxPrf.js";import{u as J}from"./useQuery-CvgeLYcU.js";import{D as X}from"./DisplayError-DsQrJfhQ.js";import{I as ee}from"./ItemNotFound-d29NNkJk.js";import"./LoadingBtn-DpcvXiWk.js";import"./ClipLoader-CriU2_1a.js";import"./index-LvzHWtTh.js";const se=({docs:t,pages:k,currentPage:f,setCurrentPage:S})=>{const A=_();return s.jsx("div",{className:"bg-secondary rounded-lg p-2 overflow-x-auto",children:s.jsxs("div",{className:"bg-dark  p-2 rounded-lg overflow-container  custom-scrollbar",children:[s.jsxs(z,{className:"sm:text-base text-sm table-auto  ",children:[s.jsx(R,{className:"bg-secondary text-left rounded-lg",children:s.jsxs(L,{className:"",children:[s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Sr"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"OrderID"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Username"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Invested Coins"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Total Profit Coins"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Invested in"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Win Bank"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Profit Percentage"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Start Date"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"End Date"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Status"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Action"})]})}),s.jsx(U,{children:t==null?void 0:t.map((e,N)=>{var c,g,o,y,p,w,d,x,i,b,h,D,u,a,v,P,I,m,B,F,M,E,Y,C;return s.jsxs(L,{className:"text-grayText sm:hover:bg-stroke hover:text-pure border-b border-b-gray-700",onClick:()=>{var T;return A(`/app/users/details/${(T=e==null?void 0:e.user)==null?void 0:T._id}`)},children:[s.jsx(n,{className:"  px-6 py-4 whitespace-nowrap sm:text-center text-right",children:e!=null&&e.longAutoIncrementId?e==null?void 0:e.longAutoIncrementId:"N/A"}),s.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:(c=e==null?void 0:e.game)!=null&&c.autoIncrementId?(g=e==null?void 0:e.game)==null?void 0:g.autoIncrementId:"N/A"}),s.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center",children:(o=e==null?void 0:e.user)!=null&&o.username?(y=e==null?void 0:e.user)==null?void 0:y.username:"N/A"}),s.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:s.jsxs("span",{className:"inline-flex items-center justify-center gap-2 w-full",children:[s.jsx("span",{children:s.jsx("img",{src:H,alt:"coin icon",width:"16",height:"16"})}),s.jsx("span",{children:e!=null&&e.coins?e==null?void 0:e.coins:"N/A"})]})}),s.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:s.jsxs("span",{className:"inline-flex items-center justify-center gap-2 w-full",children:[s.jsx("span",{children:s.jsx("img",{src:H,alt:"coin icon",width:"16",height:"16"})}),s.jsx("span",{children:(p=e==null?void 0:e.profitPlusInvested)==null?void 0:p.toFixed()})]})}),s.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e!=null&&e.bank?(w=e==null?void 0:e.bank)==null?void 0:w.replace("_"," "):"N/A"}),s.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:typeof((d=e==null?void 0:e.game)==null?void 0:d.winner)=="string"&&((x=e==null?void 0:e.game)!=null&&x.winner)?(b=(i=e==null?void 0:e.game)==null?void 0:i.winner)==null?void 0:b.replace("_"," "):"N/A"}),s.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:(h=e==null?void 0:e.game)!=null&&h.randomlySelectedBankPercentage?(D=e==null?void 0:e.game)==null?void 0:D.randomlySelectedBankPercentage:"N/A"}),s.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:(u=e==null?void 0:e.game)!=null&&u.createdAt?j((a=e==null?void 0:e.game)==null?void 0:a.createdAt).format("D MMMM YYYY, hh:mm A"):"N/A"}),s.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:(v=e==null?void 0:e.game)!=null&&v.gameEnded?j((P=e==null?void 0:e.game)==null?void 0:P.endDateTime).format("D MMMM YYYY, hh:mm A"):"N/A"}),s.jsx(n,{className:`className='px-6 py-4 whitespace-nowrap sm:text-center inline-flex justify-center items-center w-full ' ${((I=e==null?void 0:e.game)==null?void 0:I.winner)==="Tie"?"text-orange-500":((m=e==null?void 0:e.game)==null?void 0:m.winner)===null?"text-yellow-500":(e==null?void 0:e.bank)===((B=e==null?void 0:e.game)==null?void 0:B.winner)?"text-green-500":(e==null?void 0:e.bank)!==((F=e==null?void 0:e.game)==null?void 0:F.winner)?"text-red-500":""}`,children:s.jsx(O,{status:((M=e==null?void 0:e.game)==null?void 0:M.winner)==="Tie"?"Tie":((E=e==null?void 0:e.game)==null?void 0:E.winner)===null?"Game in progress":(e==null?void 0:e.bank)===((Y=e==null?void 0:e.game)==null?void 0:Y.winner)?"Win":(e==null?void 0:e.bank)!==((C=e==null?void 0:e.game)==null?void 0:C.winner)?"Loss":""})}),s.jsx(n,{className:"py-4",children:s.jsx("div",{className:"flex justify-center items-center gap-4 text-xl",children:s.jsxs($,{to:`/app/trade/details/${e==null?void 0:e._id}`,className:"text-primary","data-tooltip-id":"view-user-details","data-tooltip-content":"View Details",onClick:T=>T.stopPropagation(),children:[s.jsx("i",{className:"uil uil-eye"}),s.jsx(G,{id:"view-user-details",style:{fontSize:15}})]})})})]},N)})})]}),s.jsx(K,{totalPages:k,currentPage:f,setCurrentPage:S})]})})},ye=()=>{const[t,k]=l.useState([]),[f,S]=l.useState(1),[A,e]=l.useState(1),N=10,[c,g]=l.useState(""),[o,y]=l.useState(""),[p,w]=l.useState(""),[d,x]=l.useState("");l.useEffect(()=>{if(c&&o){if(j(o).isSame(c)||j(o).isBefore(c))return x("2025-01-11T23:59:59.999Z");if(j(c).isAfter(o))return g("2025-01-11T23:59:59.999Z");w(c),x(o)}},[c,o]);const i=["fetch-tradeHistory",{currentPage:f,limit:N,backendFromDate:p,backendToDate:d}],{isLoading:b,data:h,isError:D,error:u}=J({queryKey:i,queryFn:()=>{const a=new URLSearchParams;return a.append("page",f),a.append("pageSize",N),p&&a.append("from",p),d&&a.append("to",d),Z.get(`/trade?${a.toString()}`)}});return l.useEffect(()=>{if(h){const{data:{data:{docs:a,pages:v}}}=h;k(a),e(v)}if(u){const{response:{data:{message:a}}}=u;W.error(a)}},[h,u]),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(V,{title:"Trade History"}),s.jsx(Q,{})]}),s.jsxs("div",{className:"flex justify-between max-[400px]:flex-col gap-5 mt-6",children:[s.jsxs("div",{className:"form-row",children:[s.jsx("label",{htmlFor:"fromDate",children:"From Date"}),s.jsx("input",{type:"date",id:"fromDate",placeholder:"Select Date",onChange:a=>{g(a.target.value)},value:c})]}),s.jsxs("div",{className:"form-row",children:[s.jsx("label",{htmlFor:"toDate",children:"To Date"}),s.jsx("input",{type:"date",id:"toDate",placeholder:"Select Date",onChange:a=>{y(a.target.value)},value:o})]})]}),s.jsx("div",{className:"mt-6",children:b?s.jsx(q,{}):D?s.jsx(X,{message:"An error occured while fetching data."}):(t==null?void 0:t.length)===0?s.jsx(ee,{message:"No data found."}):s.jsx(se,{docs:t,currentPage:f,pages:A,setCurrentPage:S})})]})};export{ye as default};
