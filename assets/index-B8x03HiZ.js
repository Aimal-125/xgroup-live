import{a as k,b as C,j as s,L as F,r as o,k as P,A as I}from"./index-CR2PTnGP.js";import{B as E}from"./BackBtn-qMQnlAqP.js";import{H as B}from"./Heading-BGYpxq2W.js";import{L as H}from"./useWindowSize-Do2-NPva.js";import{u as L}from"./useQuery-BvaY5-TG.js";import{D as M}from"./DisplayError-DwBfIbvM.js";import{I as Y}from"./ItemNotFound-BOlywaMD.js";import{h as u}from"./moment-C5S46NFB.js";import{T as $,a as O,b as T,c as n,d as R,e as c}from"./Tr-Cwkp4QFl.js";import{g as Z}from"./userActions-C41UPYrL.js";import{M as q}from"./react-tooltip.min-8-V3KYLF.js";import{P as z}from"./index-JjVOQ-Uu.js";import{S as U}from"./Status-QkBM8NRO.js";import"./LoadingBtn-BtdHQEGi.js";import"./ClipLoader-BVQCHCPU.js";import"./index-LvzHWtTh.js";function _({docs:l,pages:m,currentPage:x,setCurrentPage:j}){const g=k(),N=C();return s.jsx("div",{className:"bg-secondary rounded-lg p-2 overflow-x-auto",children:s.jsxs("div",{className:"bg-dark  p-2 rounded-lg overflow-container  custom-scrollbar",children:[s.jsxs($,{className:"sm:text-base text-sm table-auto  ",children:[s.jsx(O,{className:"bg-secondary text-left rounded-lg",children:s.jsxs(T,{children:[s.jsx(n,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Sr"}),s.jsx(n,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Full Name"}),s.jsx(n,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"User Name"}),s.jsx(n,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Total Profit"}),s.jsx(n,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Claimed Coins"}),s.jsx(n,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Start Time"}),s.jsx(n,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Start Date"}),s.jsx(n,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Status"}),s.jsx(n,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Action"})]})}),s.jsx(R,{children:l==null?void 0:l.map((e,r)=>{var i,t,h,p,f;return s.jsxs(T,{className:"text-grayText sm:hover:bg-stroke hover:text-pure border-b border-b-gray-700",onClick:()=>{var d;return N(`/app/users/details/${(d=e==null?void 0:e.user)==null?void 0:d._id}`)},children:[s.jsx(c,{className:"  px-6 py-4 whitespace-nowrap sm:text-center text-right",children:e!=null&&e.longAutoIncrementId?e==null?void 0:e.longAutoIncrementId:"N/A"}),s.jsx(c,{className:"  px-6 py-4 whitespace-nowrap sm:text-center text-right",children:(i=e==null?void 0:e.user)!=null&&i.fullName?(t=e==null?void 0:e.user)==null?void 0:t.fullName:"N/A"}),s.jsx(c,{className:"  px-6 py-4 whitespace-nowrap sm:text-center text-right",children:(h=e==null?void 0:e.user)==null?void 0:h.username}),s.jsx(c,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:(p=e==null?void 0:e.totalProfit)==null?void 0:p.toFixed(2)}),s.jsx(c,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:(f=e==null?void 0:e.claimedCoins)==null?void 0:f.toFixed(2)}),s.jsx(c,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:u(e==null?void 0:e.startDateAndTime).format("hh:mm A")}),s.jsx(c,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:u(e==null?void 0:e.startDateAndTime).format("D MMMM YYYY")}),s.jsx(c,{className:`px-6 py-4 whitespace-nowrap sm:text-center text-center inline-flex w-full justify-center items-center ${e!=null&&e.hasClaimedAllCoins?"text-red-500":"text-yellow-500"}`,children:s.jsx(U,{status:e!=null&&e.hasClaimedAllCoins?"Ended":"Running"})}),s.jsx(c,{className:"px-6 py-4 whitespace-nowrap sm:text-center text-center",children:s.jsxs(F,{to:`/app/autotrades/details/${e==null?void 0:e._id}`,className:"text-primary","data-tooltip-id":"view-user-details","data-tooltip-content":"View Details",onClick:d=>{d.stopPropagation(),g(Z(e!=null&&e.autoTradeStakeOrderID?e==null?void 0:e.autoTradeStakeOrderID:"N/A"))},children:[s.jsx("i",{className:"uil uil-eye"}),s.jsx(q,{id:"view-user-details",style:{fontSize:15}})]})})]},r)})})]}),s.jsx(z,{totalPages:m,currentPage:x,setCurrentPage:j})]})})}const de=()=>{const[l,m]=o.useState([]),[x,j]=o.useState(1),[g,N]=o.useState(1),e=10,[r,i]=o.useState(""),[t,h]=o.useState(""),[p,f]=o.useState(""),[d,y]=o.useState("");o.useEffect(()=>{if(r&&t){if(u(t).isSame(r)||u(t).isBefore(r))return y("2025-01-11T23:59:59.999Z");if(u(r).isAfter(t))return i("2025-01-11T23:59:59.999Z");f(r),y(t)}},[r,t]);const S=["fetch-AutoTradesHistory",{currentPage:x,limit:e,backendFromDate:p,backendToDate:d}],{isLoading:b,data:w,isError:v,error:D}=L({queryKey:S,queryFn:()=>{const a=new URLSearchParams;return a.append("page",x),a.append("pageSize",e),p&&a.append("from",p),d&&a.append("to",d),I.get(`/auto-trade-stake-order?${a.toString()}`)}});return o.useEffect(()=>{if(w){const{data:{data:{docs:a,pages:A}}}=w;m(a),N(A)}if(D){const{response:{data:{message:a}}}=D;P.error(a)}},[w,D]),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(B,{title:"Auto Trade  History"}),s.jsx(E,{})]}),s.jsxs("div",{className:"flex justify-between max-[400px]:flex-col gap-5 mt-6",children:[s.jsxs("div",{className:"form-row",children:[s.jsx("label",{htmlFor:"fromDate",children:"From Date"}),s.jsx("input",{type:"date",id:"fromDate",placeholder:"Select Date",onChange:a=>{i(a.target.value)},value:r})]}),s.jsxs("div",{className:"form-row",children:[s.jsx("label",{htmlFor:"toDate",children:"To Date"}),s.jsx("input",{type:"date",id:"toDate",placeholder:"Select Date",onChange:a=>{h(a.target.value)},value:t})]})]}),s.jsx("div",{className:"mt-6",children:b?s.jsx(H,{}):v?s.jsx(M,{message:"An error occured while fetching data"}):(l==null?void 0:l.length)===0?s.jsx(Y,{message:"No data found."}):s.jsx(_,{docs:l,currentPage:x,setCurrentPage:j,pages:g})})]})};export{de as default};
