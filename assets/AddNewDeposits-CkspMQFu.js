import{c as U,r as c,j as e,A as y,k as b}from"./index-B-9Gm_Me.js";import{F as E,a as H,b as B,E as V}from"./formik.esm-BbQy4037.js";import{B as $}from"./BackBtn-uUxpUHCb.js";import{H as v}from"./Heading-CR7EINQw.js";import{F as n}from"./FormControl-CIKMnFb0.js";import{c as f,a,e as m,f as N}from"./index.esm-Bg4kD9Su.js";import"./Input-Be9myPu5.js";import"./react-tooltip.min-BA7Ht3Ge.js";import"./index-LvzHWtTh.js";import"./index-Chjiymov.js";function _(){const{imageData:d}=U(t=>t==null?void 0:t.image),[x,j]=c.useState("Auto"),[h,D]=c.useState(""),[r,A]=c.useState(!0),[F,q]=c.useState(""),g=0+F.length,M={verificationMethod:"Auto",label:"",minimumDepositFiat:"",maximumDepositFiat:"",currencyCode:"",imageDataURI:"",paymentMethod:"",financialInstitutionTitle:"",accountHolderTitle:"",accountNumber:"",currentlyAcceptingPayments:r?"yes":"no"},R={verificationMethod:"Manual",label:"",accountHolderTitle:"",accountNumber:"",minimumDepositFiat:"",maximumDepositFiat:"",currencyCode:"",imageDataURI:"",paymentMethod:"",financialInstitutionTitle:"",currentlyAcceptingPayments:r?"yes":"no"},P=f().shape({label:a().required("Required"),minimumDepositFiat:m().typeError("Must be an integer").integer("Must be an integer").required("Required"),maximumDepositFiat:m().typeError("Must be an integer").integer("Must be an integer").required("Required"),currencyCode:a().required("Required"),imageDataURI:N().required("Required"),paymentMethod:a().required("Required"),financialInstitutionTitle:a().required("Required"),accountHolderTitle:a().required("Required"),accountNumber:a().required("Required"),currentlyAcceptingPayments:a(),reasonForNotAcceptingPayments:a()}),I=f().shape({label:a().required("Required"),accountHolderTitle:a().required("Required"),accountNumber:a().required("Required"),minimumDepositFiat:m().typeError("Must be an integer").integer("Must be an integer").required("Required"),maximumDepositFiat:m().typeError("Must be an integer").integer("Must be an integer").required("Required"),currencyCode:a().required("Required"),imageDataURI:N().required("Required"),paymentMethod:a().required("Required"),financialInstitutionTitle:a().required("Required"),currentlyAcceptingPayments:a(),reasonForNotAcceptingPayments:a()}),w=async(t,{resetForm:i,setSubmitting:s})=>{let u;try{if(s(!0),d){r?u={...t,imageDataURI:d,description:h,minimumDepositFiat:(t==null?void 0:t.minimumDepositFiat)*100,maximumDepositFiat:(t==null?void 0:t.maximumDepositFiat)*100}:u={...t,imageDataURI:d,description:h,minimumDepositFiat:(t==null?void 0:t.minimumDepositFiat)*100,maximumDepositFiat:(t==null?void 0:t.maximumDepositFiat)*100,reasonForNotAcceptingPayments:t==null?void 0:t.reasonForNotAcceptingPayments};const{data:o}=await y.post("/app-deposit-account",u);if(o!=null&&o.success){const{data:{message:p}}=o;b.success(p)}}}catch(o){const{response:{data:{message:p}}}=o;b.error(p)}finally{i(),s(!1)}},T=[{value:"Auto",label:"Auto"},{value:"Manual",label:"Manual"}],C=[{value:"PKR",label:"PKR"},{value:"USD",label:"USD"}],[l,S]=c.useState([]);return c.useEffect(()=>{(async()=>{const{data:i}=await y.get("/app-payment-method");if(i){const{data:{doc:s}}=i;S(s)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(v,{title:"Create New Deposits"}),e.jsx($,{})]}),e.jsx("div",{className:"flex bg-dark rounded-lg flex-col gap-5 mt-6 p-5",children:e.jsx(E,{initialValues:x==="Auto"?M:R,validationSchema:x==="Auto"?P:I,onSubmit:w,enableReinitialize:!0,children:t=>e.jsxs(H,{className:"flex flex-col gap-5",children:[e.jsx("div",{children:e.jsx(n,{control:"select",label:"Account Type",name:"verificationMethod",options:T,formik:t,setAccountType:j})}),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex flex-row max-[600px]:flex-col gap-5",children:[e.jsx("div",{className:"w-full",children:e.jsx(n,{control:"input",label:"Deposit Account Name",placeholder:"Deposit Acount Name",name:"label",formik:t})}),e.jsxs("div",{className:"flex flex-col gap-[5px] w-full",children:[e.jsx("label",{className:"font-bold",htmlFor:"paymentMethod",children:"Payment Method"}),e.jsx(B,{className:`${t.errors.paymentMethod&&t.touched.paymentMethod?"border-red-500":""} bg-inherit border border-gray-700 w-full rounded-md px-[13px] py-[13px]`,as:"select",label:"Payment Method",name:"paymentMethod",options:l,formik:t,children:l==null?void 0:l.map((i,s)=>e.jsx("option",{value:i,children:i},s))}),e.jsx(V,{name:"paymentMethod",component:"div",className:"text-sm text-red-500"})]})]}),e.jsxs("div",{className:"flex flex-row max-[600px]:flex-col gap-5",children:[e.jsx(n,{control:"input",label:"Minimum Deposit",placeholder:"Minimum Deposit",name:"minimumDepositFiat",formik:t}),e.jsx(n,{control:"input",label:"Max Deposit",placeholder:"Max Deposit",name:"maximumDepositFiat",formik:t})]}),e.jsxs("div",{className:"flex flex-row max-[600px]:flex-col gap-5",children:[e.jsx(n,{control:"input",label:"Account Holder Name",placeholder:"Deposit Acount Holder Name",name:"accountHolderTitle",formik:t}),e.jsx(n,{control:"input",label:"Account Number/IBAN Number",placeholder:"Account Number/IBAN Number",name:"accountNumber",formik:t})]}),e.jsx("div",{className:"flex flex-row max-[600px]:flex-col gap-5",children:e.jsx(n,{control:"input",label:"Financial Institution",placeholder:"Financial Institution Name",name:"financialInstitutionTitle",formik:t})}),e.jsx("div",{className:"flex flex-row max-[600px]:flex-col gap-5",children:e.jsx(n,{control:"select",label:"Currency",name:"currencyCode",options:C,formik:t})}),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(n,{control:"image",label:"Deposit Account Image",name:"imageDataURI",form:t}),e.jsx(n,{control:"textarea",label:"Description",name:"description",maxLength:"100",form:t,setDescription:D})]}),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"",children:[e.jsx("input",{type:"checkbox",name:"currentlyAcceptingPayments",id:"currentlyAcceptingPayments",checked:r,onChange:()=>{A(!r)},form:t,hidden:!0}),e.jsxs("label",{htmlFor:"currentlyAcceptingPayments",className:"inline-flex max-[300px]:flex-col max-[300px]:items-start items-center gap-5 w-fit",children:[e.jsx("label",{className:"font-bold",htmlFor:"currentlyAcceptingPayments",children:"Accept Payment"}),e.jsx("span",{className:"accept-payment-toggle"})]})]}),r?"":e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("label",{className:"font-bold",htmlFor:"reasonForNotAcceptingPayments",children:"Payment Unacceptance Reason"}),e.jsx("textarea",{className:"bg-inherit border rounded-md border-gray-700 p-3 outline-none focus:border-blue-500",name:"reasonForNotAcceptingPayments",id:"reasonForNotAcceptingPayments",rows:"4",maxLength:"100",form:t,onChange:i=>{t.handleChange(i),q(i.target.value)}}),e.jsx("div",{children:e.jsxs("p",{className:"text-right text-sm",children:[g,"/100"]})}),g===100?e.jsx("p",{className:"text-sm text-red-500",children:"Max character limit of 100 reached."}):""]})]})]}),e.jsx("div",{className:"mt-1",children:e.jsx("button",{className:"btn-primary px-4 py-2",type:"submit",disabled:t.isSubmitting,children:"Submit"})})]})})})]})}export{_ as default};
