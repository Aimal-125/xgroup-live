import{r,b as O,k as P,j as s,L as C,A as E}from"./index-Dgq3PrwZ.js";import{B as I}from"./BackBtn-BTtbY5T6.js";import{H as L}from"./Heading-BleAqs7B.js";import{T as R,a as $,b as w,c as a,d as H,e as t}from"./Tr-92nl9wdn.js";import{M as W}from"./react-tooltip.min-Cay2iBks.js";import{P as Z}from"./index-k2bY_Rk7.js";import{u as _}from"./useQuery-DVR9z6m7.js";import{h as l}from"./moment-C5S46NFB.js";import{L as q}from"./useWindowSize-IxhlW9ZK.js";import{D as z}from"./DisplayError-DbAkVp0H.js";import{I as K}from"./ItemNotFound-jt-aLSPW.js";import{S as Q}from"./Status-shZdHOu8.js";import"./index-LvzHWtTh.js";import"./LoadingBtn-ean50z1k.js";import"./ClipLoader-DZl_46q6.js";function pe(){const[c,D]=r.useState([]),T=O(),[d,S]=r.useState(1),[b,v]=r.useState(1),m=10,[n,j]=r.useState(""),[o,k]=r.useState(""),[p,A]=r.useState(""),[x,i]=r.useState("");r.useEffect(()=>{if(n&&o){if(l(o).isSame(n)||l(o).isBefore(n))return i("2025-01-11T23:59:59.999Z");if(l(n).isAfter(o))return j("2025-01-11T23:59:59.999Z");A(n),i(o)}},[n,o]);const B=["fetch-tradeRealTimeStats",{currentPage:d,limit:m,backendFromDate:p,backendToDate:x}],{isLoading:M,data:h,isError:Y,error:u}=_({queryKey:B,queryFn:()=>{const e=new URLSearchParams;return e.append("page",d),e.append("pageSize",m),p&&e.append("from",p),x&&e.append("to",x),E.get(`/game?${e.toString()}`)}});return r.useEffect(()=>{if(h){const{data:{data:{docs:e,pages:f}}}=h;D(e),v(f)}if(u){const{response:{data:{message:e}}}=u;P.error(e)}},[h,u]),s.jsx(s.Fragment,{children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(L,{title:"Trade Real Time Stats"}),s.jsx(I,{})]}),s.jsxs("div",{className:"flex justify-between max-[400px]:flex-col gap-5 mt-6",children:[s.jsxs("div",{className:"form-row",children:[s.jsx("label",{htmlFor:"fromDate",children:"From Date"}),s.jsx("input",{type:"date",id:"fromDate",placeholder:"Select Date",onChange:e=>{j(e.target.value)},value:n})]}),s.jsxs("div",{className:"form-row",children:[s.jsx("label",{htmlFor:"toDate",children:"To Date"}),s.jsx("input",{type:"date",id:"toDate",placeholder:"Select Date",onChange:e=>{k(e.target.value)},value:o})]})]}),M?s.jsx(q,{}):Y?s.jsx(z,{message:"An error occured while fetching data."}):(c==null?void 0:c.length)===0?s.jsx(K,{message:"No data found."}):s.jsx("div",{className:"bg-secondary rounded-lg p-2 mt-6 overflow-x-auto",children:s.jsxs("div",{className:"bg-dark  p-2 rounded-lg overflow-auto  custom-scrollbar",children:[s.jsxs(R,{className:"sm:text-base text-sm table-auto  ",children:[s.jsx($,{className:"bg-secondary text-left rounded-lg",children:s.jsxs(w,{className:"",children:[s.jsx(a,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Session Id"}),s.jsx(a,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Coins On State Bank"}),s.jsx(a,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Coins On World Bank"}),s.jsx(a,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Trade Door Open Time (seconds)"}),s.jsx(a,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Start Time"}),s.jsx(a,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Completion Time"}),s.jsx(a,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Win Bank"}),s.jsx(a,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Date"}),s.jsx(a,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Status"}),s.jsx(a,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Action"})]})}),s.jsx(H,{children:c==null?void 0:c.map((e,f)=>{var g,N,y;return s.jsxs(w,{className:"text-grayText sm:hover:bg-stroke hover:text-pure border-b border-b-gray-700",onClick:()=>T(`/app/trade/real-time-stats/details/${e==null?void 0:e._id}`),children:[s.jsx(t,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e!=null&&e.longAutoIncrementId?e==null?void 0:e.longAutoIncrementId:"N/A"}),s.jsx(t,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e!=null&&e.coinsOnBanks?(g=e==null?void 0:e.coinsOnBanks[0])==null?void 0:g.toFixed():"N/A"}),s.jsx(t,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e!=null&&e.coinsOnBanks?(N=e==null?void 0:e.coinsOnBanks[1])==null?void 0:N.toFixed():"N/A"}),s.jsx(t,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e!=null&&e.tradeDoorOpenTime?e==null?void 0:e.tradeDoorOpenTime:"N/A"}),s.jsx(t,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:l(e.createdAt).format("D, MMMM YYYY, hh:mm A")}),s.jsx(t,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e!=null&&e.endDateTime?l(e==null?void 0:e.endDateTime).format("D, MMMM YYYY, hh:mm A"):"..."}),s.jsx(t,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e!=null&&e.winner?(y=e==null?void 0:e.winner)==null?void 0:y.replace("_"," "):"..."}),s.jsx(t,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e!=null&&e.createdAt?l(e==null?void 0:e.createdAt).format("D, MMMM YYYY, hh:mm A"):"..."}),s.jsx(t,{className:`className='px-6 py-4 whitespace-nowrap sm:text-center inline-flex items-center justify-center w-full ' ${e!=null&&e.gameEnded?"text-green-500":"text-yellow-500"}`,children:s.jsx(Q,{status:e!=null&&e.gameEnded?"completed":"running"})}),s.jsx(t,{className:"py-4",children:s.jsx("div",{className:"flex items-center justify-center gap-4 text-xl",children:s.jsxs(C,{to:`/app/trade/real-time-stats/details/${e==null?void 0:e._id}`,className:"text-primary","data-tooltip-id":"view-trade-details","data-tooltip-content":"View Details",onClick:F=>F.stopPropagation(),children:[s.jsx("i",{className:"uil uil-eye"}),s.jsx(W,{id:"view-trade-details",style:{fontSize:15}})]})})})]},f)})})]}),s.jsx(Z,{totalPages:b,currentPage:d,setCurrentPage:S})]})})]})})}export{pe as default};
