import{u as v,a as N,b as E,r as p,c as w,j as t,d as L,A as P,k as R,t as C}from"./index-B7EDHShO.js";import{F,a as S}from"./formik.esm-DEzKEWAH.js";import{i as B,a as U}from"./inventoryActions-CepoyLrq.js";import{c as V}from"./convertToFormData-BGYHkJhh.js";import{c as A}from"./confirmBox-BrVpeNRy.js";import{B as T}from"./BackBtn-CSTzC4ci.js";import{H as Y}from"./Heading-DW26iUKW.js";import{F as l}from"./FormControl-DgOezG3Z.js";import{L as z}from"./LoadingBtn-DmYHjot9.js";import{C as H}from"./ClipLoader-DJNL0iZY.js";import"./index-Chjiymov.js";import"./Input-Dl_zu7N-.js";import"./react-tooltip.min-CfVVvbF_.js";import"./index-LvzHWtTh.js";const D=()=>{const{id:i}=v(),o=N(),h=E(),[a,x]=p.useState([]),[u,c]=p.useState(!1),{docDetails:e,updateLoading:g}=w(s=>s.inventory),j={name:(e==null?void 0:e.name)||"",model:(e==null?void 0:e.model)||"",location:(e==null?void 0:e.location)||"",type:(e==null?void 0:e.type)||"",price:(e==null?void 0:e.price)||"",duration:(e==null?void 0:e.duration)||"",totalRides:(e==null?void 0:e.totalRides)||"",totalProfit:(e==null?void 0:e.totalProfit)||"",status:(e==null?void 0:e.status)||"",images:[]};p.useEffect(()=>{e||o(B(i)),e&&x(()=>[...e==null?void 0:e.images])},[i,e,o]);const b=s=>{var r;((r=s==null?void 0:s.images)==null?void 0:r.length)===0&&(s==null||delete s.images);const n=V(s);o(U(i,n,h))},f=async s=>{A({message:"Are you sure? You want to delete this image?",onYesClick:async()=>{c(!0);try{const{data:{data:{message:m}}}=await P.post(`/inventory/delete-image/${i}`,{fileName:s});R.success(m),x(d=>d==null?void 0:d.filter(y=>y!==s)),c(!1)}catch(m){c(!1),C(m)}}})};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(Y,{title:"Update Inventory"}),t.jsx(T,{})]}),t.jsx("div",{className:"mt-4 bg-dark p-4 rounded-lg",children:t.jsx(F,{initialValues:j,onSubmit:b,enableReinitialize:!0,children:s=>t.jsxs(S,{className:"flex lg:gap-12 lg:flex-row flex-col",autocomplete:"off",children:[t.jsxs("div",{className:"flex-[0.7] flex flex-col gap-4 ",children:[t.jsxs("div",{className:"flex gap-4 lg:flex-row flex-col",children:[t.jsx(l,{control:"input",label:"Name",placeholder:"Enter name",name:"name",formik:s}),t.jsx(l,{control:"input",label:"Model",placeholder:"Enter vehicle model",name:"model",formik:s})]}),t.jsxs("div",{className:"flex gap-4 lg:flex-row flex-col",children:[t.jsx(l,{control:"select",label:"Type",name:"type",formik:s}),t.jsx(l,{control:"select",label:"Location",name:"location",formik:s})]}),t.jsxs("div",{className:"flex gap-4 lg:flex-row flex-col",children:[t.jsx(l,{control:"input",type:"number",label:"Price",placeholder:"Enter vehicle price",name:"price",formik:s}),t.jsx(l,{control:"input",type:"number",label:"Duration",placeholder:"Enter duration",name:"duration",formik:s})]}),t.jsx(l,{control:"input",type:"number",label:"Total Rides",placeholder:"Ex : 10",name:"totalRides",formik:s}),t.jsx(l,{control:"input",type:"number",label:"Profit",placeholder:"Enter vehicle profit",name:"totalProfit",formik:s})]}),t.jsxs("div",{className:"flex-[0.3] ",children:[t.jsx("div",{className:"flex flex-wrap items-center gap-4 mt-6",children:(a==null?void 0:a.length)>0&&(a==null?void 0:a.map((n,r)=>t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:L+n,alt:"Screenn",className:"w-[200px] h-[100px] object-cover rounded-md"}),t.jsx("button",{className:"absolute top-1 right-2 text-red-500  cursor-pointer text-xl",onClick:()=>{f(n)},disabled:u,type:"button",children:u?t.jsx(H,{size:15,color:"white"}):t.jsx("i",{className:"uil uil-trash"})})]},r)))}),t.jsx(l,{control:"multi-file",label:"Images",name:"images",formik:s}),t.jsx("div",{className:"mt-8",children:t.jsx(l,{control:"toggle",label:"Published",name:"status",checkedValue:"published",uncheckValue:"paused",formik:s})}),t.jsx("div",{className:"mt-8 border-t border-t-gray-700 flex items-end justify-end pt-6",children:t.jsx("button",{className:"btn-primary py-2 px-6",type:"submit",disabled:g||!s.isValid,children:g?t.jsx(z,{}):"Update"})})]})]})})}),t.jsx("div",{className:"mt-4 flex gap-4"})]})};export{D as default};
