import{A as N,k as g,a2 as y,r as d,T as S,a as C,b as P,c as $,j as s,d as E,a3 as H}from"./index-Dgq3PrwZ.js";import{T as B,a as L,b as j,c as o,d as M,e as n}from"./Tr-92nl9wdn.js";import{B as F}from"./BackBtn-BTtbY5T6.js";import{H as Y}from"./Heading-BleAqs7B.js";import{P as _}from"./index-k2bY_Rk7.js";import{c as q}from"./confirmBox-CwIKJADo.js";import{u as R}from"./useQuery-DVR9z6m7.js";import{L as U}from"./useWindowSize-IxhlW9ZK.js";import{D as z}from"./DisplayError-DbAkVp0H.js";import{I as J}from"./ItemNotFound-jt-aLSPW.js";import"./index-Chjiymov.js";import"./LoadingBtn-ean50z1k.js";import"./ClipLoader-DZl_46q6.js";const K=a=>async i=>{try{const{data:{data:{message:t}}}=await N.delete(`/app-deposit-account/${a}`);g.success(t),i(y(!0))}catch(t){const{response:{data:{message:c}}}=t;g.error(c)}};function re(){const[a,i]=d.useState([]),t=S(),{roles:c}=t,b=c==null?void 0:c.includes("admin"),r=C(),p=P(),{accountDeleted:m}=$(e=>e==null?void 0:e.depositAccounts),[x,A]=d.useState(1),[w,v]=d.useState(1),f=10,D=["fetch-depositAccounts",{currentPage:x,limit:f,accountDeleted:m}],{isLoading:T,data:u,isError:k,error:h}=R({queryKey:D,queryFn:()=>N.get(`/app-deposit-account?page=${x}&pageSize=${f}`)});d.useEffect(()=>{if(u){const{data:{data:{docs:e,pages:l}}}=u;i(e),v(l),r(y(!1))}if(h){const{response:{data:{message:e}}}=h;g.error(e)}},[u,h,m,r]);const I=e=>{q({message:"Are you sure? You want to delete this deposit account?",onYesClick:()=>r(K(e))})};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(Y,{title:"Deposit Accounts"}),s.jsx(F,{})]}),s.jsxs("div",{className:"flex flex-col gap-6 mt-6",children:[s.jsx("div",{className:"flex justify-end items-center",children:s.jsx("button",{className:"btn-primary px-4 py-2",onClick:()=>p("/app/depositAccounts/add-new-deposits"),children:"Add New Deposits"})}),s.jsx("div",{className:"bg-secondary rounded-lg p-2 overflow-x-auto",children:s.jsxs("div",{className:"bg-dark p-2 rounded-lg overflow-container custom-scrollbar",children:[T?s.jsx(U,{}):k?s.jsx(z,{message:"An error occured while fetching data."}):(a==null?void 0:a.length)===0?s.jsx(J,{message:"No data found."}):s.jsxs(B,{className:"sm:text-base text-sm table-auto  ",children:[s.jsx(L,{className:"bg-secondary text-left rounded-lg",children:s.jsxs(j,{children:[s.jsx(o,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Sr"}),s.jsx(o,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Account Holder"}),s.jsx(o,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Account Image"}),s.jsx(o,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Account Type"}),s.jsx(o,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Action"})]})}),s.jsx(M,{children:a==null?void 0:a.map((e,l)=>s.jsxs(j,{className:"text-grayText border-b border-b-gray-700",children:[s.jsx(n,{className:"  px-6 py-4 whitespace-nowrap sm:text-center text-right",children:e!=null&&e.longAutoIncrementId?e==null?void 0:e.longAutoIncrementId:"N/A"}),s.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e==null?void 0:e.accountHolderTitle}),s.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:s.jsx("span",{className:"inline-block w-[80px] h-[80px]",children:s.jsx("img",{src:`${E}/${e==null?void 0:e.image}`,alt:"deposit account image",style:{width:"100%",height:"100%"}})})}),s.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e==null?void 0:e.verificationMethod}),s.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:s.jsxs("span",{className:"inline-flex gap-2",children:[s.jsx("button",{className:"text-blue-500",title:"View",onClick:()=>p(`/app/depositAccounts/details/${e==null?void 0:e._id}`),children:s.jsx("i",{className:"uil uil-eye text-xl  "})}),s.jsx("button",{className:"text-green-500",title:"Edit",onClick:()=>{p(`/app/depositAccounts/edit/${e==null?void 0:e._id}`),r(H(e==null?void 0:e.verificationMethod)),localStorage.setItem("verificationMethod",JSON.stringify(e==null?void 0:e.verificationMethod))},children:s.jsx("i",{className:"uil uil-pen text-xl  "})}),b?s.jsx("button",{className:"text-red-500",title:"Delete",onClick:()=>I(e==null?void 0:e._id),children:s.jsx("i",{className:"uil uil-trash text-xl  "})}):""]})})]},l))})]}),s.jsx(_,{totalPages:w,currentPage:x,setCurrentPage:A})]})})]})]})}export{re as default};
