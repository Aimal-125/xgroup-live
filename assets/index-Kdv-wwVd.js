import{j as s,L as f,a as g,c as N,r as v,S as b,A as D}from"./index-B7EDHShO.js";import{u as T}from"./useQuery-BH2ipur7.js";import{H as A}from"./Heading-DW26iUKW.js";import{B as P}from"./BackBtn-CSTzC4ci.js";import{L as M}from"./useWindowSize-DFtMrG7S.js";import{D as Y}from"./DisplayError-DJ1Lcd3h.js";import{h as m}from"./moment-C5S46NFB.js";import{T as k,a as w,b as p,c as a,d as C,e as r}from"./Tr-CFhT2wbf.js";import{M as E}from"./react-tooltip.min-CfVVvbF_.js";import{P as S}from"./index-CqrQsClu.js";import{S as _}from"./Status-CY8HG0JN.js";import{f as V}from"./formatAmount-CWLewUcu.js";import{I as L}from"./ItemNotFound-DyPlXfej.js";import"./LoadingBtn-DmYHjot9.js";import"./ClipLoader-DJNL0iZY.js";import"./index-LvzHWtTh.js";const B=()=>{const t=[{_id:"1",inventory:{_id:"inv1",name:"Vehicle A"},inventoryDetails:{price:5e4},createdAt:"2023-12-15T12:00:00Z",expiredAt:"2024-12-15T12:00:00Z",status:"active"},{_id:"2",inventory:{_id:"inv2",name:"Vehicle B"},inventoryDetails:{price:3e4},createdAt:"2023-12-10T15:00:00Z",expiredAt:"2024-12-10T15:00:00Z",status:"inactive"}],i=3,c=1,o=e=>{alert(`Viewing details of purchase ID: ${e._id}`)};return s.jsx("div",{className:"bg-secondary rounded-lg p-2",children:s.jsxs("div",{className:"bg-dark p-2 rounded-lg",children:[s.jsxs(k,{className:"sm:text-base text-sm",children:[s.jsx(w,{className:"bg-secondary text-left rounded-lg",children:s.jsxs(p,{className:"",children:[s.jsx(a,{className:"py-4 sm:pl-10",children:"Vehicle"}),s.jsx(a,{className:"py-4",children:"Price"}),s.jsx(a,{className:"py-4",children:"Purchased On"}),s.jsx(a,{className:"py-4",children:"Expired"}),s.jsx(a,{className:"py-4",children:"Status"}),s.jsx(a,{className:"py-4",children:"View"})]})}),s.jsx(C,{children:t.map((e,n)=>s.jsxs(p,{className:`
                                        text-grayText sm:hover:bg-stroke hover:text-pure
                                        ${n===t.length-1?"":"border-b border-b-gray-700"}
                                    `,children:[s.jsx(r,{className:"sm:pl-10 py-4",children:s.jsx(f,{to:`/app/inventory/${e.inventory._id}`,className:"underline hover:text-primary",children:e.inventory.name})}),s.jsx(r,{className:"py-4",children:V(e.inventoryDetails.price)}),s.jsx(r,{className:"py-4",children:m(e.createdAt).format("DD MMM YYYY hh:mm A")}),s.jsx(r,{className:"py-4",children:m(e.expiredAt).format("DD MMM YYYY hh:mm A")}),s.jsx(r,{className:"py-4",children:s.jsx(_,{status:e.status})}),s.jsx(r,{className:"py-4",children:s.jsxs("button",{onClick:()=>o(e),className:"w-fit flex items-center gap-2 cursor-pointer","data-tooltip-id":"purchase-details","data-tooltip-content":"View Details",children:[s.jsx("i",{className:"uil uil-eye"}),s.jsx("span",{children:"Details"}),s.jsx(E,{id:"purchase-details",style:{fontSize:15,background:"var(--primary)"}})]})})]},e._id))})]}),s.jsx(S,{totalPages:i,currentPage:c,setCurrentPage:()=>{}})]})})},ss=()=>{const t=g(),{docs:i,docsCount:c,currentPage:o}=N(l=>l.purchase),e=["fetch-all-my-purchases",o],{isLoading:n,data:d,isError:h,error:u}=T({queryKey:e,queryFn:()=>D(`/purchase?page=${o}`),refetchOnWindowFocus:!1});return v.useEffect(()=>{if(d){const{data:{data:{docs:l,pages:x,docsCount:j,page:y}}}=d;t(b({docs:l,pages:x,docsCount:j,page:y}))}},[d,t]),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(A,{title:"Purchases",docsCount:c||null}),s.jsx(P,{})]}),s.jsx("div",{className:"mt-6",children:n?s.jsx(M,{}):h?s.jsx(Y,{message:returnErrorMsg(u)}):(i==null?void 0:i.length)>0?s.jsx(B,{}):s.jsx(L,{message:"No purchase found."})})]})};export{ss as default};
