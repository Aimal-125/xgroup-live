import{u as D,r as m,A as I,k as S,j as e,L as Y,T as E}from"./index-B7EDHShO.js";import{H as L}from"./Heading-DW26iUKW.js";import{B as H}from"./BackBtn-CSTzC4ci.js";import{S as O}from"./Status-CY8HG0JN.js";import{u as w}from"./useQuery-BH2ipur7.js";import{L as k}from"./useWindowSize-DFtMrG7S.js";import{D as F}from"./DisplayError-DJ1Lcd3h.js";import{I as C}from"./ItemNotFound-DyPlXfej.js";import{f as P}from"./formatAmount-CWLewUcu.js";import{h as M}from"./moment-C5S46NFB.js";import{T as $,a as q,b as T,c as N,d as B,e as v}from"./Tr-CFhT2wbf.js";import{P as K}from"./index-CqrQsClu.js";import{P as R}from"./plus-icon-Cm0htiCt.js";import"./LoadingBtn-DmYHjot9.js";import"./ClipLoader-DJNL0iZY.js";const U=({label:n,value:s,to:l,isLast:o,status:t})=>e.jsxs("div",{className:`flex items-center justify-between gap-4 p-4 pb-5 ${o?"":"border-b border-b-gray-700"}`,children:[e.jsx("h6",{children:n}),l?e.jsx(Y,{to:l,className:"text-grayText underline",children:s}):e.jsx("p",{children:e.jsx("span",{children:s})}),n==="Status"?e.jsx(O,{status:t}):""]}),z=()=>{var g,h,j,b,i,y,d,a,c;const{id:n}=D(),[s,l]=m.useState([]),o=["fetch-AutoTradeDetails",{id:n}],{isLoading:t,data:x,isError:u,error:p}=w({queryKey:o,queryFn:()=>I.get(`/auto-trade-stake-order/${n}`)});m.useEffect(()=>{if(x){const{data:{data:{doc:r}}}=x;l(r)}if(p){const{response:{data:{message:r}}}=p;S.error(r)}},[x,p]);const f=[{label:"Sr",value:s!=null&&s.longAutoIncrementId?s==null?void 0:s.longAutoIncrementId:"N/A"},{label:"Full Name",value:(g=s==null?void 0:s.user)!=null&&g.fullName?(h=s==null?void 0:s.user)==null?void 0:h.fullName:"N/A"},{label:"User Name",value:(j=s==null?void 0:s.user)==null?void 0:j.username},{label:"OrderID",value:((b=s==null?void 0:s.orderObjectId)==null?void 0:b.orderID)||"N/A"},{label:"Invested Coins",value:P((i=s==null?void 0:s.investedCoins)==null?void 0:i.toFixed(2))},{label:"Daily Profit",value:((y=s==null?void 0:s.dailyProfit)==null?void 0:y.toFixed(2))||"N/A"},{label:"Total Profit",value:P((d=s==null?void 0:s.totalProfit)==null?void 0:d.toFixed(2))},{label:"Claimed Coins",value:(a=s==null?void 0:s.claimedCoins)==null?void 0:a.toFixed(2)},{label:"Start Time",value:M(s==null?void 0:s.startDateAndTime).format("D, MMMM YYYY, hh:mm A")},{label:"Days Passed Since Start Time",value:s==null?void 0:s.daysPassed},{label:"Status",status:s!=null&&s.hasClaimedAllCoins?"ended":"running"}];return e.jsx(e.Fragment,{children:t?e.jsx("div",{className:"p-5",children:e.jsx(k,{})}):u?e.jsx("div",{className:"p-5",children:e.jsx(F,{message:"An error occured while fetching data"})}):((c=Object.keys(s))==null?void 0:c.length)===0?e.jsx("div",{className:"p-5",children:e.jsx(C,{message:"No data found."})}):e.jsx("div",{children:f.map((r,A)=>e.jsx(U,{label:r.label,value:r.value,isLast:A===f.length-1,status:r.status},A))})})},oe=()=>{const{id:n}=D(),s=E(),{roles:l}=s,o=l==null?void 0:l.includes("admin"),[t,x]=m.useState([]),[u,p]=m.useState(1),[f,g]=m.useState(1),h=10,j=["fetch-DailyProfitHistory",{id:n,currentPage:u,limit:h}],{isLoading:b,data:i,isError:y,error:d}=w({queryKey:j,queryFn:()=>{if(o)return I.get(`/auto-trade-profit-history/?autoTradeStakeOrderObjectId=${n}&page=${u}&pageSize=${h}`)}});return m.useEffect(()=>{if(i){const{data:{data:{docs:a,pages:c}}}=i;x(a),g(c)}if(d){const{response:{data:{message:a}}}=d;S.error(a)}},[i,d]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(L,{title:"Auto Trade Details"}),e.jsx(H,{})]}),e.jsxs("div",{className:"flex gap-5 flex-col mt-6",children:[e.jsx("div",{className:"bg-dark rounded-lg",children:e.jsx(z,{})}),o?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xl font-bold",children:"Daily Profit History"}),e.jsx("div",{className:"bg-secondary rounded-lg p-2 overflow-x-auto",children:e.jsxs("div",{className:"bg-dark  p-2 rounded-lg overflow-container custom-scrollbar",children:[b?e.jsx(k,{}):y?e.jsx(F,{message:"An error occured while fetching data"}):(t==null?void 0:t.length)===0?e.jsx(C,{message:"No data found."}):e.jsxs($,{className:"sm:text-base text-sm table-auto  ",children:[e.jsx(q,{className:"bg-secondary text-left rounded-lg",children:e.jsxs(T,{children:[e.jsx(N,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Sr"}),e.jsx(N,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Daily Profit"}),e.jsx(N,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Date & Time"})]})}),e.jsx(B,{children:t==null?void 0:t.map((a,c)=>{var r;return e.jsxs(T,{className:"text-grayText sm:hover:bg-stroke hover:text-pure border-b border-b-gray-700",children:[e.jsx(v,{className:"  px-6 py-4 whitespace-nowrap sm:text-center text-right",children:a!=null&&a.longAutoIncrementId?a==null?void 0:a.longAutoIncrementId:"N/A"}),e.jsx(v,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{children:e.jsx("img",{src:R,alt:"icon",width:"16px",height:"16px"})}),e.jsx("span",{children:(r=a==null?void 0:a.profitCoins)==null?void 0:r.toFixed(2)})]})}),e.jsx(v,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:M(a==null?void 0:a.createdAt).format("D, MMMM YYYY, hh:mm A")})]},c)})})]}),e.jsx(K,{totalPages:f,currentPage:u,setCurrentPage:p})]})})]}):""]})]})};export{oe as default};
