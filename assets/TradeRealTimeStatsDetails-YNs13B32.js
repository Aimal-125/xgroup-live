import{u as ne,r as h,k as re,j as s,L as U,A as z}from"./index-Dgq3PrwZ.js";import{B as le}from"./BackBtn-BTtbY5T6.js";import{H as ce}from"./Heading-BleAqs7B.js";import{P as y}from"./plus-icon-Cm0htiCt.js";import{S as G}from"./Status-shZdHOu8.js";import{M as te}from"./react-tooltip.min-Cay2iBks.js";import{T as oe,a as xe,b as K,c as r,d as pe,e as l}from"./Tr-92nl9wdn.js";import{P as de}from"./index-k2bY_Rk7.js";import{u as he}from"./useQuery-DVR9z6m7.js";import{L as ge}from"./useWindowSize-IxhlW9ZK.js";import{D as je}from"./DisplayError-DbAkVp0H.js";import{I as Q}from"./ItemNotFound-jt-aLSPW.js";import{h as u}from"./moment-C5S46NFB.js";import"./index-LvzHWtTh.js";import"./LoadingBtn-ean50z1k.js";import"./ClipLoader-DZl_46q6.js";function Se(){var m,A,T,v;const{id:d}=ne(),[a,f]=h.useState([]),[c,i]=h.useState([]),[w,V]=h.useState(1),[J,X]=h.useState(1),Z=10,ee=["fetch-tradeRealTimeDetailsById",{id:d}],{isLoading:se,data:b,isError:ae,error:n}=he({queryKey:ee,queryFn:()=>z.get(`/game/${d}`)});return h.useEffect(()=>{var e,o,x,p,g,j;if(b){const{data:{data:{doc:N}}}=b;f(N)}n&&re.error((e=n==null?void 0:n.data)!=null&&e.message?(o=n==null?void 0:n.data)==null?void 0:o.message:n!=null&&n.message?n==null?void 0:n.message:(p=(x=n==null?void 0:n.response)==null?void 0:x.data)!=null&&p.message?(j=(g=n==null?void 0:n.response)==null?void 0:g.data)==null?void 0:j.message:"Error")},[b,n]),h.useEffect(()=>{(async()=>{try{const{data:o}=await z.get(`/trade?gameObjectId=${d}&page=${w}&pageSize=${Z}`),{data:{docs:x,pages:p}}=o;i(x),X(p)}catch(o){console.log(o)}})()},[w,d]),s.jsx(s.Fragment,{children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ce,{title:"Trade Real Time Stats Details"}),s.jsx(le,{})]}),s.jsx("div",{className:"flex flex-col gap-5 mt-6",children:se?s.jsx(ge,{}):ae?s.jsx(je,{}):((m=Object.keys(a))==null?void 0:m.length)===0?s.jsx(Q,{}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-dark rounded-lg",children:[s.jsx(t,{label:"Session ID",value:(a==null?void 0:a.longAutoIncrementId)||"N/A"}),s.jsx(t,{label:"Coins On State Bank",value:(A=a==null?void 0:a.coinsOnBanks[0])==null?void 0:A.toFixed(),icon:y}),s.jsx(t,{label:"Coins On World Bank",value:(T=a==null?void 0:a.coinsOnBanks[1])==null?void 0:T.toFixed(),icon:y}),s.jsx(t,{label:"Trade Door Open Time (seconds)",value:a!=null&&a.tradeDoorOpenTime?a==null?void 0:a.tradeDoorOpenTime:"N/A"}),s.jsx(t,{label:"Start Time",value:a!=null&&a.createdAt?u(a==null?void 0:a.createdAt).format("D, MMMM YYYY, hh:mm A"):"N/A"}),s.jsx(t,{label:"Completion Time",value:a!=null&&a.endDateTime?u(a==null?void 0:a.endDateTime).format("D, MMMM, YYYY, hh:mm A"):"..."}),s.jsx(t,{label:"Win Bank",value:a!=null&&a.winner?(v=a==null?void 0:a.winner)==null?void 0:v.replace("_"," "):"..."}),s.jsx(t,{label:"Date",value:a!=null&&a.createdAt?u(a==null?void 0:a.createdAt).format("D, MMMM YYYY, hh:mm A"):"N/A"}),s.jsx(t,{label:"Status",status:s.jsx(G,{status:a!=null&&a.gameEnded?"completed":"running"})})]}),s.jsx("div",{className:"bg-secondary rounded-lg p-2 overflow-x-auto",children:s.jsxs("div",{className:"bg-dark  p-2 rounded-lg overflow-container  custom-scrollbar",children:[(c==null?void 0:c.length)>0?s.jsxs(oe,{className:"sm:text-base text-sm table-auto  ",children:[s.jsx(xe,{className:"bg-secondary text-left rounded-lg",children:s.jsxs(K,{className:"",children:[s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Sr"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"OrderID"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Username"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Invested Coins"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Total Profit Coins"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Invested in"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Win Bank"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Profit Percentage"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Start Date"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"End Date"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Status"}),s.jsx(r,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Action"})]})}),s.jsx(pe,{children:c==null?void 0:c.map((e,o)=>{var x,p,g,j,N,k,D,I,M,Y,S,P,B,E,O,F,C,L,$,R,W,_,H,q;return s.jsxs(K,{className:"text-grayText sm:hover:bg-stroke hover:text-pure border-b border-b-gray-700",children:[s.jsx(l,{className:"  px-6 py-4 whitespace-nowrap sm:text-center text-right",children:e!=null&&e.longAutoIncrementId?e==null?void 0:e.longAutoIncrementId:"N/A"}),s.jsx(l,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:(x=e==null?void 0:e.game)!=null&&x.autoIncrementId?(p=e==null?void 0:e.game)==null?void 0:p.autoIncrementId:"N/A"}),s.jsx(l,{className:"px-6 py-4 whitespace-nowrap sm:text-center",children:(g=e==null?void 0:e.user)!=null&&g.username?(j=e==null?void 0:e.user)==null?void 0:j.username:"N/A"}),s.jsx(l,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:s.jsxs("span",{className:"inline-flex items-center justify-center gap-2 w-full",children:[s.jsx("span",{children:s.jsx("img",{src:y,alt:"coin icon",width:"16",height:"16"})}),s.jsx("span",{children:e!=null&&e.coins?e==null?void 0:e.coins:"N/A"})]})}),s.jsx(l,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:s.jsxs("span",{className:"inline-flex items-center justify-center gap-2 w-full",children:[s.jsx("span",{children:s.jsx("img",{src:y,alt:"coin icon",width:"16",height:"16"})}),s.jsx("span",{children:(N=e==null?void 0:e.profitPlusInvested)==null?void 0:N.toFixed()})]})}),s.jsx(l,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e!=null&&e.bank?(k=e==null?void 0:e.bank)==null?void 0:k.replace("_"," "):"N/A"}),s.jsx(l,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:typeof((D=e==null?void 0:e.game)==null?void 0:D.winner)=="string"&&((I=e==null?void 0:e.game)!=null&&I.winner)?(Y=(M=e==null?void 0:e.game)==null?void 0:M.winner)==null?void 0:Y.replace("_"," "):"N/A"}),s.jsx(l,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:(S=e==null?void 0:e.game)!=null&&S.randomlySelectedBankPercentage?(P=e==null?void 0:e.game)==null?void 0:P.randomlySelectedBankPercentage:"N/A"}),s.jsx(l,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:(B=e==null?void 0:e.game)!=null&&B.createdAt?u((E=e==null?void 0:e.game)==null?void 0:E.createdAt).format("D MMMM YYYY, hh:mm A"):"N/A"}),s.jsx(l,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:(O=e==null?void 0:e.game)!=null&&O.gameEnded?u((F=e==null?void 0:e.game)==null?void 0:F.endDateTime).format("D MMMM YYYY, hh:mm A"):"N/A"}),s.jsx(l,{className:`className='px-6 py-4 whitespace-nowrap sm:text-center inline-flex justify-center items-center w-full ' ${((C=e==null?void 0:e.game)==null?void 0:C.winner)==="Tie"?"text-orange-500":((L=e==null?void 0:e.game)==null?void 0:L.winner)===null?"text-yellow-500":(e==null?void 0:e.bank)===(($=e==null?void 0:e.game)==null?void 0:$.winner)?"text-green-500":(e==null?void 0:e.bank)!==((R=e==null?void 0:e.game)==null?void 0:R.winner)?"text-red-500":""}`,children:s.jsx(G,{status:((W=e==null?void 0:e.game)==null?void 0:W.winner)==="Tie"?"Tie":((_=e==null?void 0:e.game)==null?void 0:_.winner)===null?"Game in progress":(e==null?void 0:e.bank)===((H=e==null?void 0:e.game)==null?void 0:H.winner)?"Win":(e==null?void 0:e.bank)!==((q=e==null?void 0:e.game)==null?void 0:q.winner)?"Loss":""})}),s.jsx(l,{className:"py-4",children:s.jsx("div",{className:"flex justify-center items-center gap-4 text-xl",children:s.jsxs(U,{to:`/app/trade/details/${e==null?void 0:e._id}`,className:"text-primary","data-tooltip-id":"view-user-details","data-tooltip-content":"View Details",children:[s.jsx("i",{className:"uil uil-eye"}),s.jsx(te,{id:"view-user-details",style:{fontSize:15}})]})})})]},o)})})]}):s.jsx(Q,{}),s.jsx(de,{totalPages:J,currentPage:w,setCurrentPage:V})]})})]})})]})})}const t=({label:d,value:a,to:f,icon:c,status:i})=>s.jsxs("div",{className:"flex items-center justify-between gap-4 border-b last-of-type:border-none border-b-gray-700 p-4",children:[s.jsx("h6",{children:d}),f?s.jsx(U,{to:f,className:"text-grayText underline",children:a}):s.jsxs("p",{className:"text-grayText flex items-center gap-1",children:[c?s.jsx("span",{children:s.jsx("img",{src:c,alt:"icon"})}):"",s.jsx("span",{children:a})]}),i||""]});export{Se as default};
