import{a as D,b as E,j as e,c as w,r as h,F as k,k as C,A as F}from"./index-1pnDSHOU.js";import{H as P}from"./Heading-BRXzxPrf.js";import{D as I}from"./DisplayError-DsQrJfhQ.js";import{L as $}from"./useWindowSize-BkpUPsDX.js";import{T as U,a as q,b as v,c as l,d as H,e as n}from"./Tr-Dyr3Fnjo.js";import{P as L}from"./index-BovKxo3P.js";import{c as Y}from"./confirmBox-Dlu52BfT.js";import{d as _,g as B}from"./adminUsersAction-DwaauYay.js";import{S as R}from"./Status-B8QfwEhJ.js";import{u as z}from"./useQuery-CvgeLYcU.js";import{I as K}from"./ItemNotFound-d29NNkJk.js";import"./LoadingBtn-DpcvXiWk.js";import"./ClipLoader-CriU2_1a.js";import"./index-Chjiymov.js";const Q=({docs:t,pages:j,currentPage:d,setCurrentPage:g,startIndex:c})=>{const f=D(),p=E(),y=s=>{Y({message:"Are you sure? You want to delete this employee?",onYesClick:()=>f(_(s))})},o=s=>{p(`/app/edit-employee/${s}`)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"bg-secondary rounded-lg p-2 overflow-x-auto",children:e.jsxs("div",{className:"bg-dark  p-2 rounded-lg overflow-container  custom-scrollbar",children:[e.jsxs(U,{className:"sm:text-base text-sm table-auto  ",children:[e.jsx(q,{className:"bg-secondary text-left rounded-lg",children:e.jsxs(v,{children:[e.jsx(l,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Sr"}),e.jsxs(l,{scope:"col",className:"font-medium px-6 py-4 text-center",children:["User Name"," "]}),e.jsxs(l,{scope:"col",className:"font-medium px-6 py-4 text-center",children:["Email"," "]}),e.jsx(l,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Role"}),e.jsx(l,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Password"}),e.jsx(l,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Status"}),e.jsx(l,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Action"})]})}),e.jsx(H,{children:t==null?void 0:t.map((s,r)=>{var i;return e.jsxs(v,{className:"text-grayText sm:hover:bg-stroke hover:text-pure border-b border-b-gray-700",children:[e.jsx(n,{className:"  px-6 py-4 whitespace-nowrap sm:text-center text-right",children:s!=null&&s.longAutoIncrementId?s==null?void 0:s.longAutoIncrementId:c+r+1?c+r+1:"N/A"}),e.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:s==null?void 0:s.username}),e.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:s==null?void 0:s.email}),e.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e.jsx("span",{children:(i=s.roles)==null?void 0:i.map((x,m)=>{var u;return e.jsxs("span",{children:[x.replace("_"," "),m<((u=s==null?void 0:s.roles)==null?void 0:u.length)-1&&", "]},m)})})}),e.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e.jsx("span",{children:"****"})}),e.jsx(n,{className:"inline-flex justify-center items-center w-full px-6 py-4 whitespace-nowrap sm:text-center ",children:e.jsx(R,{status:s==null?void 0:s.status})}),e.jsx(n,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("button",{className:"text-blue-500",title:"Edit",onClick:()=>o(s==null?void 0:s._id),children:e.jsx("i",{className:"uil uil-pen text-xl  "})}),e.jsx("button",{className:"text-red-500",title:"Declined request",onClick:()=>y(s==null?void 0:s._id),children:e.jsx("i",{className:"uil uil-times text-xl  "})})]})})]},r)})})]}),e.jsx(L,{totalPages:j,currentPage:d,setCurrentPage:g})]})})})},le=()=>{const{docs:t,pages:j}=w(a=>a==null?void 0:a.adminUsers),d=D(),g=E(),[c,f]=h.useState(""),[p,y]=h.useState(""),[o,s]=h.useState(1),r=10,i=(o-1)*r,{employeeDeleted:x}=w(a=>a==null?void 0:a.adminUsers),m=["fetch-employees",{currentPage:o,limit:r,fromDate:c,toDate:p,employeeDeleted:x}],{isLoading:u,data:N,isError:A,error:b}=z({queryKey:m,queryFn:()=>F.get(`/user/employees?page=${o}&pageSize=${r}&from=${c}&to=${p}`)});h.useEffect(()=>{if(N){const{data:{data:{docs:a,pages:T}}}=N;d(B(a,T)),d(k(!1))}if(b){const{response:{data:{message:a}}}=b;C.error(a)}},[d,o,N,b,x]);const S=()=>{g("/app/createadminusers")};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(P,{title:"Employees"}),e.jsx("div",{className:"",children:e.jsx("button",{onClick:S,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-700 text-white rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400",children:"Add New Employee"})})]}),e.jsxs("div",{className:"flex justify-between max-[400px]:flex-col gap-5 mt-6",children:[e.jsxs("div",{className:"form-row",children:[e.jsx("label",{htmlFor:"fromDate",children:"From Date"}),e.jsx("input",{type:"date",id:"fromDate",placeholder:"Select Date",onChange:a=>f(a.target.value),value:c})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("label",{htmlFor:"toDate",children:"To Date"}),e.jsx("input",{type:"date",id:"toDate",placeholder:"Select Date",onChange:a=>y(a.target.value),value:p})]})]}),e.jsx("div",{className:"mt-6",children:u?e.jsx($,{}):A?e.jsx(I,{message:"An error occurred while fetching users."}):(t==null?void 0:t.length)===0?e.jsx(K,{message:"No data found"}):e.jsx(Q,{docs:t,pages:j,startIndex:i,currentPage:o,setCurrentPage:s})})]})};export{le as default};
