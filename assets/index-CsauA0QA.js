import{r as a,b as C,k as E,H as M,j as e,A as L}from"./index-DXC4WxTY.js";import{B as H}from"./BackBtn-CAoFsR9d.js";import{H as Y}from"./Heading-BW07qGLk.js";import{h as l}from"./moment-C5S46NFB.js";import{P as V}from"./index-CvxaO4ZM.js";import{T as Z,a as q,b as w,c as n,d as R,e as c}from"./Tr-BAmmJf8y.js";import{P as U}from"./plus-icon-CADXI1Pn.js";import{u as _}from"./useQuery-dmNfqFuk.js";import{L as $}from"./useWindowSize-CJaWzJUi.js";import{D as z}from"./DisplayError-BPL7rDiG.js";import{I as K}from"./ItemNotFound-PPiIMDK4.js";import"./LoadingBtn-BPpN-Rmz.js";import"./ClipLoader-BeN6fJ0f.js";function oe(){const[o,b]=a.useState([]),[p,D]=a.useState(1),[v,S]=a.useState(1),f=10,[t,j]=a.useState(""),[r,T]=a.useState(""),[i,P]=a.useState(""),[x,d]=a.useState(""),k=C();a.useEffect(()=>{if(t&&r){if(l(r).isSame(t)||l(r).isBefore(t))return d("2025-01-11T23:59:59.999Z");if(l(t).isAfter(r))return j("2025-01-11T23:59:59.999Z");P(t),d(r)}},[t,r]);const F=["fetch-salary",{currentPage:p,limit:f,backendFromDate:i,backendToDate:x}],{isLoading:A,data:m,isError:I,error:h}=_({queryKey:F,queryFn:()=>{const s=new URLSearchParams;return s.append("page",p),s.append("pageSize",f),s.append("sortBy","createdAt_ascending"),i&&s.append("from",i),x&&s.append("to",x),L.get(`/salary?${s.toString()}`)}});a.useEffect(()=>{if(m){const{data:{data:{docs:s,pages:u}}}=m;b(s),S(u)}h&&E.error(M(h))},[m,h]);const B=s=>{k(`/app/salary/details/${s}`)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Y,{title:"Salary"}),e.jsx(H,{})]}),e.jsxs("div",{className:"flex justify-between max-[400px]:flex-col gap-5",children:[e.jsxs("div",{className:"form-row",children:[e.jsx("label",{htmlFor:"fromDate",children:"From Date"}),e.jsx("input",{type:"date",id:"fromDate",placeholder:"Select Date",onChange:s=>{j(s.target.value)},value:t})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("label",{htmlFor:"toDate",children:"To Date"}),e.jsx("input",{type:"date",id:"toDate",placeholder:"Select Date",onChange:s=>{T(s.target.value)},value:r})]})]}),A?e.jsx($,{}):I?e.jsx(z,{}):(o==null?void 0:o.length)===0?e.jsx(K,{}):e.jsx("div",{className:"bg-secondary rounded-lg p-2 overflow-x-auto",children:e.jsxs("div",{className:"bg-dark  p-2 rounded-lg overflow-container  custom-scrollbar",children:[e.jsxs(Z,{className:"sm:text-base text-sm table-auto  ",children:[e.jsx(q,{className:"bg-secondary text-left rounded-lg",children:e.jsxs(w,{children:[e.jsx(n,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Sr"}),e.jsx(n,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Username"}),e.jsx(n,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Salary Category"}),e.jsx(n,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Coins"}),e.jsx(n,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"This Month Increase %"}),e.jsx(n,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Date & Time"}),e.jsx(n,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Action"})]})}),e.jsx(R,{children:o==null?void 0:o.map((s,u)=>{var g,y,N;return e.jsxs(w,{className:"text-grayText sm:hover:bg-stroke hover:text-pure border-b border-b-gray-700",children:[e.jsx(c,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:s==null?void 0:s.longAutoIncrementId}),e.jsx(c,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:(g=s==null?void 0:s.user)==null?void 0:g.username}),e.jsx(c,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:(y=s==null?void 0:s.salaryLevel)==null?void 0:y.stringValue}),e.jsx(c,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"w-[16px] h-[16px]",children:e.jsx("img",{src:U,alt:"coins icon",width:"16",height:"16"})}),e.jsx("span",{children:((N=s==null?void 0:s.earnedCoins)==null?void 0:N.toFixed(2))||0})]})}),e.jsx(c,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:s==null?void 0:s.thisMonthIncreasePercentage}),e.jsx(c,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:l((s==null?void 0:s.createdAt)||"2025-01-01").format("D, MMMM YYYY, hh:mm A")}),e.jsx(c,{className:"px-6 py-4 whitespace-nowrap sm:text-center ",children:e.jsx("span",{className:"inline-flex items-center gap-2",children:e.jsx("button",{className:"text-blue-500",title:"View",onClick:()=>B(s==null?void 0:s._id),children:e.jsx("i",{className:"uil uil-eye text-xl  "})})})})]},u)})})]}),e.jsx(V,{totalPages:v,currentPage:p,setCurrentPage:D})]})})]})})}export{oe as default};
