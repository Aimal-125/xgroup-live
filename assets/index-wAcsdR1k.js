import{j as e,L as b,r,k as A,A as B}from"./index-Dgq3PrwZ.js";import{T as E,a as C,b as v,c as i,d as I,e as d}from"./Tr-92nl9wdn.js";import{P as L}from"./index-k2bY_Rk7.js";import{S as $}from"./Status-shZdHOu8.js";import{H as G}from"./Heading-BleAqs7B.js";import{B as H}from"./BackBtn-BTtbY5T6.js";import{L as Z}from"./useWindowSize-IxhlW9ZK.js";import{D as q}from"./DisplayError-DbAkVp0H.js";import{u as z}from"./useQuery-DVR9z6m7.js";import{h as N}from"./moment-C5S46NFB.js";import{I as M}from"./ItemNotFound-jt-aLSPW.js";import"./LoadingBtn-ean50z1k.js";import"./ClipLoader-DZl_46q6.js";const R=({docs:o,currentPage:p,setCurrentPage:n,pages:u,startIndex:x})=>{const f=t=>{switch(t){case"Pending":return"text-yellow-500";case"Finished":return"text-green-500";case"Proceeding":return"text-blue-500";case"Error":return"text-red-500";default:return"text-gray-500"}};function l(t){return t>=1e9?(t/1e9).toFixed(1).replace(/\.0$/,"")+" B":t>=1e6?(t/1e6).toFixed(1).replace(/\.0$/,"")+" M":t>=1e3?(t/1e3).toFixed(1).replace(/\.0$/,"")+" k":t==null?void 0:t.toString()}return e.jsx("div",{className:"bg-secondary rounded-lg p-2 overflow-x-auto",children:e.jsxs("div",{className:"bg-dark  p-2 rounded-lg overflow-container  custom-scrollbar",children:[e.jsxs(E,{className:"sm:text-base text-sm table-auto  ",children:[e.jsx(C,{className:"bg-secondary text-left rounded-lg",children:e.jsxs(v,{children:[e.jsx(i,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Sr"}),e.jsx(i,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Participant Country"}),e.jsx(i,{scope:"col",className:" font-medium px-6 py-4 text-center",children:"Members"}),e.jsxs(i,{scope:"col",className:"font-medium px-6 py-4 text-center",children:["Status"," "]}),e.jsx(i,{scope:"col",className:"font-medium px-6 py-4 text-center",children:"Action"})]})}),e.jsx(I,{children:o==null?void 0:o.map((t,a)=>e.jsxs(v,{className:"text-grayText sm:hover:bg-stroke hover:text-pure border-b border-b-gray-700",children:[e.jsx(d,{className:"  px-6 py-4 whitespace-nowrap sm:text-center text-right",children:t!=null&&t.longAutoIncrementId?t==null?void 0:t.longAutoIncrementId:x+a+1?x+a+1:"N/A"}),e.jsx(d,{className:"  px-6 py-4 whitespace-nowrap sm:text-center text-right",children:t==null?void 0:t.countryName}),e.jsx(d,{className:"  px-6 py-4 whitespace-nowrap sm:text-center text-right",children:l(t==null?void 0:t.membersCount)}),e.jsx(d,{className:`1px-6 py-4 whitespace-nowrap sm:text-center w-full inline-flex items-center justify-center capitalize ${f(t==null?void 0:t.status)} `,children:e.jsx($,{status:t==null?void 0:t.status})}),e.jsx(d,{className:"px-6 py-4 whitespace-nowrap sm:text-center   ",children:e.jsx("div",{className:"flex flex-row  w-full justify-center items-center gap-2",children:e.jsx(b,{to:`/app/guests/details/${t==null?void 0:t._id}`,className:"text-blue-500 hover:text-pure duration-200",title:"View Details",children:e.jsx("i",{className:"uil uil-eye"})})})})]},a))})]}),e.jsx(L,{totalPages:u,currentPage:p,setCurrentPage:n})]})})},ae=()=>{const[o,p]=r.useState([]),[n,u]=r.useState(1),[x,f]=r.useState(1),l=10,t=(n-1)*l,[a,w]=r.useState(""),[c,D]=r.useState(""),[h,S]=r.useState(""),[m,g]=r.useState("");r.useEffect(()=>{if(a&&c){if(N(c).isSame(a)||N(c).isBefore(a))return g("2025-01-11T23:59:59.999Z");if(N(a).isAfter(c))return w("2025-01-11T23:59:59.999Z");S(a),g(c)}},[a,c]);const T=["fetch-guests",{currentPage:n,limit:l,backendFromDate:h,backendToDate:m}],{isLoading:F,data:j,isError:k,error:y}=z({queryKey:T,queryFn:()=>{const s=new URLSearchParams;return s.append("page",n),s.append("pageSize",l),h&&s.append("from",h),m&&s.append("to",m),B.get(`/guest?${s.toString()}`)}});return r.useEffect(()=>{if(j){const{data:{data:{docs:s,pages:P}}}=j;p(s),f(P)}if(y){const{response:{data:{message:s}}}=y;A.error(s)}},[j,y]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(G,{title:"Guests"}),e.jsx(H,{})]}),e.jsx("div",{className:"pt-5 flex justify-end",children:e.jsx("div",{children:e.jsx(b,{to:"/app/guests/add-new-guests",className:"bg-blue-500 py-2 px-4 hover:bg-blue-700 transition-colors text-white rounded",children:"Add New Guests"})})}),e.jsxs("div",{className:"flex justify-between max-[400px]:flex-col gap-5 mt-6",children:[e.jsxs("div",{className:"form-row",children:[e.jsx("label",{htmlFor:"fromDate",children:"From Date"}),e.jsx("input",{type:"date",id:"fromDate",placeholder:"Select Date",onChange:s=>{w(s.target.value)},value:a})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("label",{htmlFor:"toDate",children:"To Date"}),e.jsx("input",{type:"date",id:"toDate",placeholder:"Select Date",onChange:s=>{D(s.target.value)},value:c})]})]}),e.jsx("div",{className:"mt-6",children:F?e.jsx(Z,{}):k?e.jsx(q,{}):(o==null?void 0:o.length)===0?e.jsx(M,{}):e.jsx(R,{docs:o,currentPage:n,setCurrentPage:u,pages:x,startIndex:t})})]})};export{ae as default};
