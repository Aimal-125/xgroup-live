import{r as s,j as e,A as N}from"./index-DXC4WxTY.js";import{D as k}from"./DepositsTable-D6zq_G51.js";import{B as w}from"./BackBtn-CAoFsR9d.js";import{H as A}from"./Heading-BW07qGLk.js";import{D as B}from"./DisplayError-BPL7rDiG.js";import{L}from"./useWindowSize-CJaWzJUi.js";import{u as P}from"./useQuery-dmNfqFuk.js";import{I as C}from"./ItemNotFound-PPiIMDK4.js";import{h as l}from"./moment-C5S46NFB.js";import"./Tr-BAmmJf8y.js";import"./img1-Dr1yV29J.js";import"./index-CvxaO4ZM.js";import"./moment-Cl3kVgzE.js";import"./Status-DBi7uq6n.js";import"./LoadingBtn-BPpN-Rmz.js";import"./ClipLoader-BeN6fJ0f.js";const X=()=>{const[o,x]=s.useState([]),[n,g]=s.useState(1),[D,h]=s.useState(1),[j,S]=s.useState("Error"),f=10,[a,u]=s.useState(""),[r,v]=s.useState(""),[m,y]=s.useState(""),[c,p]=s.useState("");s.useEffect(()=>{if(a&&r){if(l(r).isSame(a)||l(r).isBefore(a))return p("2025-01-11T23:59:59.999Z");if(l(a).isAfter(r))return u("2025-01-11T23:59:59.999Z");y(a),p(r)}},[a,r]);const E=["fetch-autoDeposits",{currentPage:n,limit:f,backendFromDate:m,backendToDate:c}],{data:d,isError:F,isLoading:T,error:i}=P({queryKey:E,queryFn:()=>{const t=new URLSearchParams;return t.append("page",n),t.append("pageSize",f),t.append("verificationMethod","Auto"),m&&t.append("from",m),c&&t.append("to",c),N.get(`/deposit?${t.toString()}`)}});return s.useEffect(()=>{if(d){const{data:{data:{docs:t,pages:b}}}=d;x(t),h(b)}if(i){const{response:{data:{message:t}}}=i;S(t)}},[d,i]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(A,{title:"Auto Deposits"}),e.jsx(w,{})]}),e.jsxs("div",{className:"flex justify-between max-[400px]:flex-col gap-5 mt-6",children:[e.jsxs("div",{className:"form-row",children:[e.jsx("label",{htmlFor:"fromDate",children:"From Date"}),e.jsx("input",{type:"date",id:"fromDate",placeholder:"Select Date",onChange:t=>u(t.target.value),value:a})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("label",{htmlFor:"toDate",children:"To Date"}),e.jsx("input",{type:"date",id:"toDate",placeholder:"Select Date",onChange:t=>v(t.target.value),value:r})]})]}),e.jsx("div",{className:"mt-6",children:T?e.jsx(L,{}):F?e.jsx(B,{message:i?j:"An error occurred while fetching data"}):(o==null?void 0:o.length)===0?e.jsx(C,{message:"No data found."}):e.jsx(k,{docs:o,pages:D,currentPage:n,setCurrentPage:g})})]})};export{X as default};
